{
  "timestamp": "20251227_114625",
  "root": "C:\\Users\\Administrator\\Desktop\\Quant_System",
  "plan_exists": true,
  "current_milestone": "M8",
  "version": "V1.1+ï¼ˆå·¥ç¨‹åŒ–/é™¤æƒé™¤æ¯/çœ‹æ¿ç­‰ï¼‰",
  "milestones": {
    "M0": {
      "title": "snapshotâ†’factorsâ†’preprocessâ†’rule_scoreâ†’picks åŸºç¡€é—­ç¯",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 5,
      "total_checks": 5,
      "details": [
        {
          "check": "snapshot å­˜åœ¨",
          "ok": true,
          "regex": [
            "\\bsnapshot\\b",
            "snapshot_raw",
            "snapshot_table"
          ],
          "evidence": [
            {
              "regex": "\\bsnapshot\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "å®æˆäº¤ã€çœŸå®æŒä»“ä¸èµ„äº§  ä¸¤ç«¯é€šè¿‡æ–‡ä»¶åè®® + æ¯æ—¥å¯¹è´¦é—­ç¯ï¼Œè¾¾åˆ°ï¼šå¯å¤ç›˜ã€å¯æ‰§è¡Œã€å¯é•¿æœŸç¨³å®šè·‘  0.2 ä¸‰æ¡é“å¾‹  Snapshot Immutableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ "
            },
            {
              "regex": "snapshot_raw",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "åˆ°ï¼šå¯å¤ç›˜ã€å¯æ‰§è¡Œã€å¯é•¿æœŸç¨³å®šè·‘  0.2 ä¸‰æ¡é“å¾‹  Snapshot Immutableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/e"
            },
            {
              "regex": "\\bsnapshot\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "     \"\"\"     return {         \"M0\": {             \"title\": \"snapshotâ†’factorsâ†’preprocessâ†’rule_scoreâ†’picks åŸºç¡€é—­ç¯\",             \"pas"
            },
            {
              "regex": "snapshot_raw",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "cks\": [                 (\"snapshot å­˜åœ¨\", [r\"\\bsnapshot\\b\", r\"snapshot_raw\", r\"snapshot_table\"]),                 (\"factors/å› å­\", [r\"\\b"
            },
            {
              "regex": "snapshot_table",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "       (\"snapshot å­˜åœ¨\", [r\"\\bsnapshot\\b\", r\"snapshot_raw\", r\"snapshot_table\"]),                 (\"factors/å› å­\", [r\"\\bfactor\\b\", r\"Factor"
            },
            {
              "regex": "snapshot_raw",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\core\\sqlite_store.py",
              "snippet": "3.Connection) -> None:     \"\"\"Create V1 schema (append-only snapshot_raw + execution artifacts).\"\"\"     conn.executescript(         "
            }
          ]
        },
        {
          "check": "factors/å› å­",
          "ok": true,
          "regex": [
            "\\bfactor\\b",
            "FactorRegistry",
            "factors?_",
            "å› å­"
          ],
          "evidence": [
            {
              "regex": "FactorRegistry",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "aViewï¼ˆçº é”™è¡¥ä¸ï¼‰  IndexSnapshotï¼ˆæŒ‡æ•°å¿«ç…§ï¼‰  AttributionBucketsï¼ˆå½’å› åˆ†ç±»ï¼‰  FactorRegistry + è‡ªåŠ¨ schema è¿ç§»ï¼ˆå› å­åŠ¨ç‰©å›­å¯æ§ï¼‰  ResearchLoader / Webhook / HTML æ™¨æŠ¥"
            },
            {
              "regex": "factors?_",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "è·‘å‰å¿…é¡»é€šè¿‡ï¼‰  11) å› å­å­˜å‚¨ï¼šå®½è¡¨ vs é•¿è¡¨ï¼ˆFuture Proofingï¼‰ V1 é€‰æ‹©ï¼šå®½è¡¨ï¼ˆå¿«ã€ç®€å•ï¼‰  factors_daily(date, code, f1, f2, ...)  V1.1 å¢å¼ºï¼šFactorRegistry + Sch"
            },
            {
              "regex": "å› å­",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " + æŠ—çœŸå®æ‘©æ“¦ï¼‰  æ•°æ®æºæ²»ç†ï¼ˆç¬¬ä¸‰æ–¹ Tushare è§„åˆ™ + é™æµ/æ–­è·¯å™¨/ç¼“å­˜ + å®¹ç¾ï¼‰  snapshotâ†’å› å­â†’é¢„å¤„ç†â†’è§„åˆ™åˆ†â†’TopN  æ ‡ç­¾ï¼ˆOpen D+1 â†’ Close D+hï¼‰+ ä¸€å­—æ¿ä¹°ä¸è¿›æƒé‡ä¸º 0  ç»„åˆè´¦æœ¬ï¼ˆB"
            },
            {
              "regex": "FactorRegistry",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "_table\"]),                 (\"factors/å› å­\", [r\"\\bfactor\\b\", r\"FactorRegistry\", r\"factors?_\", r\"å› å­\"]),                 (\"preprocess/æ¸…æ´—\", "
            },
            {
              "regex": "å› å­",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "apshot_raw\", r\"snapshot_table\"]),                 (\"factors/å› å­\", [r\"\\bfactor\\b\", r\"FactorRegistry\", r\"factors?_\", r\"å› å­\"]),"
            },
            {
              "regex": "å› å­",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ui\\components.py",
              "snippet": "phase == \"NIGHT_JOB\":         st.info(\"ğŸŒ™ **å¤œé—´ä½œä¸šè¿è¡Œä¸­**ï¼šæ•°æ®æ¸…æ´— â†’ å› å­è®¡ç®— â†’ è§„åˆ™åˆ†/æ¨¡å‹ â†’ å†™å…¥ picks_daily â€¦\")     elif phase == \"MORNING_"
            }
          ]
        },
        {
          "check": "preprocess/æ¸…æ´—",
          "ok": true,
          "regex": [
            "preprocess",
            "clean",
            "sanitize",
            "winsor",
            "standard",
            "å½’ä¸€",
            "æ¸…æ´—"
          ],
          "evidence": [
            {
              "regex": "preprocess",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "nlyï¼‰  FilterEngineï¼ˆç¡¬è¿‡æ»¤ï¼Œè¾“å‡º candidatesï¼‰  FactorEngineï¼ˆå‘é‡åŒ–å› å­ï¼‰  PreprocessEngineï¼ˆwinsorize+rank_pctï¼›å¹¶ä¿ç•™ raw/zscore ç»™å¼ºåº¦ç›‘æ§ï¼‰  RuleScoreï¼ˆr"
            },
            {
              "regex": "winsor",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "eï¼ˆç¡¬è¿‡æ»¤ï¼Œè¾“å‡º candidatesï¼‰  FactorEngineï¼ˆå‘é‡åŒ–å› å­ï¼‰  PreprocessEngineï¼ˆwinsorize+rank_pctï¼›å¹¶ä¿ç•™ raw/zscore ç»™å¼ºåº¦ç›‘æ§ï¼‰  RuleScoreï¼ˆrule_score ä¸»å¹²å…œ"
            },
            {
              "regex": "æ¸…æ´—",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "  TradingCalendarï¼ˆtrade_cal ç¼“å­˜ + is_trade_dayï¼‰  DataAdapterï¼ˆæ¸…æ´—ã€tradeableã€å¼‚å¸¸æ£€æµ‹ã€å®¡è®¡å­—æ®µï¼‰  SnapshotStoreï¼ˆsnapshot_raw append-onl"
            },
            {
              "regex": "clean",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": "coding: utf-8 -*- \"\"\" ç­–ç•¥åï¼šæ­å–œå‘è´¢ v4.8  Â· Warmup + Slice + AutoCleanï¼ˆNo-OS / PTrade å¯ç›´æ¥å›æµ‹ï¼‰ è¯´æ˜ï¼š - ä¸ä½¿ç”¨ osï¼›å›æµ‹å¯åŠ¨æ—¶å¯è‡ªåŠ¨æ¸…ç©º CSVï¼ˆAUTO_CLEA"
            },
            {
              "regex": "preprocess",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "rn {         \"M0\": {             \"title\": \"snapshotâ†’factorsâ†’preprocessâ†’rule_scoreâ†’picks åŸºç¡€é—­ç¯\",             \"pass_ratio\": 0.6,     "
            },
            {
              "regex": "clean",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "\"å› å­\"]),                 (\"preprocess/æ¸…æ´—\", [r\"preprocess\", r\"clean\", r\"sanitize\", r\"winsor\", r\"standard\", r\"å½’ä¸€\", r\"æ¸…æ´—\"]),     "
            }
          ]
        },
        {
          "check": "rule_score/æ‰“åˆ†",
          "ok": true,
          "regex": [
            "rule[_-]?score",
            "score_rules?",
            "æ‰“åˆ†",
            "rank"
          ],
          "evidence": [
            {
              "regex": "rank",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "  ---  ## 2) ä¸€é”®ä¿®å¤ï¼ˆè§£å†³ä½ ç°åœ¨çš„æŠ¥é”™ï¼‰  ä½ æˆªå›¾çš„æŠ¥é”™å±äº **SQLite è¡¨ç»“æ„ç¼ºåˆ—**ï¼ˆæ—§åº“æ²¡ `rank_final` / `rank_rule`ï¼‰ã€‚  ä¿®å¤æ–¹å¼äºŒé€‰ä¸€ï¼š  ### æ–¹å¼ Aï¼šUI é‡Œç‚¹æŒ‰é’® ä¾§è¾¹æ å‡ºç°çº¢ç¯æ—¶"
            },
            {
              "regex": "æ‰“åˆ†",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "- è¯»å– `daily_bars.csv` - è¿‡æ»¤ Universeï¼ˆé»˜è®¤å‰”é™¤ 300/688/301/689ï¼‰ - æ‰“åˆ†å¹¶å†™å…¥ `picks_daily` - å¦‚æœ `model.enabled=true` ä¸” Key æ­£ç¡®ï¼Œä¼šå†™å…¥ `mo"
            },
            {
              "regex": "rule[_-]?score",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " PreprocessEngineï¼ˆwinsorize+rank_pctï¼›å¹¶ä¿ç•™ raw/zscore ç»™å¼ºåº¦ç›‘æ§ï¼‰  RuleScoreï¼ˆrule_score ä¸»å¹²å…œåº•ï¼‰  DualHeadModelEngineï¼ˆAlpha+Riskï¼šDeepSeek-V"
            },
            {
              "regex": "rank",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " è½»æƒé‡åˆ‡æ¢ï¼‰  Volatility Damper  NewsSnapshotï¼ˆè‹¥æ–°é—»å…¥åˆ†åˆ™å¿…é¡»å¿«ç…§åŒ–ï¼‰  å¼ºåº¦é—¨æ§ï¼ˆRanking Trapï¼šTopN å¼ºåº¦ä½åˆ™é™ä»“/ç¦æ–°å¼€ï¼‰  3) æ•°æ®æºå±‚ï¼šç¬¬ä¸‰æ–¹ Tushareï¼ˆDataApi Proxy"
            },
            {
              "regex": "æ‰“åˆ†",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\æµ£è·¨æ•¤å¨´ä½ºâ–¼_ç€¹å±¾æš£ç’‡å­˜æ§‘.md",
              "snippet": "- è¯»å– `daily_bars.csv` - è¿‡æ»¤ Universeï¼ˆé»˜è®¤å‰”é™¤ 300/688/301/689ï¼‰ - æ‰“åˆ†å¹¶å†™å…¥ `picks_daily` - å¦‚æœ `model.enabled=true` ä¸” Key æ­£ç¡®ï¼Œä¼šå†™å…¥ `mo"
            },
            {
              "regex": "rank",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\config\\config.yaml",
              "snippet": "  deepseek_model: deepseek-chat   qwen_model: qwen3-max   rerank_enabled: true risk_gate:   veto:     severity_gte: 3     pr"
            }
          ]
        },
        {
          "check": "picks/TopN",
          "ok": true,
          "regex": [
            "\\bpicks?\\b",
            "TopN",
            "select_top",
            "é€‰è‚¡"
          ],
          "evidence": [
            {
              "regex": "\\bpicks?\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "bars.csv`ï¼šé€‰è‚¡è¾“å…¥æ•°æ®ï¼ˆNight Job è¯»å–ï¼‰ - `data/quant.db`ï¼šSQLite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orders.csv`ï¼šMo"
            },
            {
              "regex": "TopN",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "  é¡¹ç›®æ ¹ç›®å½•ï¼š`Quant_System/`  å…³é”®è·¯å¾„ï¼š  - `config/config.yaml`ï¼šç³»ç»Ÿé…ç½®ï¼ˆTopNã€æ¨¡å‹å¼€å…³ã€é£æ§é˜ˆå€¼ç­‰ï¼‰ - `data/bars/daily_bars.csv`ï¼šé€‰è‚¡è¾“å…¥æ•°æ®ï¼ˆNight Job è¯»"
            },
            {
              "regex": "é€‰è‚¡",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "ig.yaml`ï¼šç³»ç»Ÿé…ç½®ï¼ˆTopNã€æ¨¡å‹å¼€å…³ã€é£æ§é˜ˆå€¼ç­‰ï¼‰ - `data/bars/daily_bars.csv`ï¼šé€‰è‚¡è¾“å…¥æ•°æ®ï¼ˆNight Job è¯»å–ï¼‰ - `data/quant.db`ï¼šSQLite æ•°æ®åº“ï¼ˆpicksã€model_"
            },
            {
              "regex": "\\bpicks?\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "13) æœ€å°å¼€å·¥é¡ºåºï¼ˆå¼ºçƒˆå»ºè®®ï¼‰  M0ï¼šsnapshotâ†’factorsâ†’preprocessâ†’rule_scoreâ†’picks  M1ï¼šlabelsï¼ˆopenâ†’close + buyableï¼‰  M2ï¼športfolioï¼ˆBuffer+æˆæœ¬+é”ä»“"
            },
            {
              "regex": "TopN",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "æ•°æ®æºæ²»ç†ï¼ˆç¬¬ä¸‰æ–¹ Tushare è§„åˆ™ + é™æµ/æ–­è·¯å™¨/ç¼“å­˜ + å®¹ç¾ï¼‰  snapshotâ†’å› å­â†’é¢„å¤„ç†â†’è§„åˆ™åˆ†â†’TopN  æ ‡ç­¾ï¼ˆOpen D+1 â†’ Close D+hï¼‰+ ä¸€å­—æ¿ä¹°ä¸è¿›æƒé‡ä¸º 0  ç»„åˆè´¦æœ¬ï¼ˆBuffer Zone + "
            },
            {
              "regex": "é€‰è‚¡",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "0) ç›®æ ‡ä¸ç¡¬è¾¹ç•Œ 0.1 ç³»ç»Ÿç›®æ ‡  æœ¬åœ° Pythonï¼šè´Ÿè´£æ•°æ®æ²»ç†ã€é€‰è‚¡ã€åŒå¤´æ¨¡å‹æ¨ç†ã€é£é™©é—¸é—¨ã€å‡ºå•æ–‡ä»¶ã€ç›‘æ§ã€å½’å› ã€æŠ¥å‘Š  PTradeï¼šè´Ÿè´£çœŸå®ä¸‹å•ã€çœŸå®æˆäº¤ã€çœŸå®æŒä»“ä¸èµ„äº§  ä¸¤ç«¯é€šè¿‡"
            }
          ]
        }
      ]
    },
    "M1": {
      "title": "labels (D+1 open â†’ D+h close) + ä¸€å­—æ¿ buyable=0",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 4,
      "total_checks": 4,
      "details": [
        {
          "check": "labels/æ ‡ç­¾",
          "ok": true,
          "regex": [
            "\\blabels?\\b",
            "make_labels",
            "label_table",
            "æ ‡ç­¾"
          ],
          "evidence": [
            {
              "regex": "\\blabels?\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "shot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨  LLM ä¸ç®—æ•°ï¼šPython å…ˆç®—æ‰€æœ‰ç»Ÿè®¡ï¼ŒLLM åªåŸºäº FactPack è¾“å‡ºè§£é‡Š"
            },
            {
              "regex": "æ ‡ç­¾",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ç¬¬ä¸‰æ–¹ Tushare è§„åˆ™ + é™æµ/æ–­è·¯å™¨/ç¼“å­˜ + å®¹ç¾ï¼‰  snapshotâ†’å› å­â†’é¢„å¤„ç†â†’è§„åˆ™åˆ†â†’TopN  æ ‡ç­¾ï¼ˆOpen D+1 â†’ Close D+hï¼‰+ ä¸€å­—æ¿ä¹°ä¸è¿›æƒé‡ä¸º 0  ç»„åˆè´¦æœ¬ï¼ˆBuffer Zone + æˆæœ¬ +"
            },
            {
              "regex": "\\blabels?\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "        ],         },         \"M1\": {             \"title\": \"labels (D+1 open â†’ D+h close) + ä¸€å­—æ¿ buyable=0\",             \"pass_"
            },
            {
              "regex": "make_labels",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "checks\": [                 (\"labels/æ ‡ç­¾\", [r\"\\blabels?\\b\", r\"make_labels\", r\"label_table\", r\"æ ‡ç­¾\"]),                 (\"D\\\\+1 open / f"
            },
            {
              "regex": "label_table",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "           (\"labels/æ ‡ç­¾\", [r\"\\blabels?\\b\", r\"make_labels\", r\"label_table\", r\"æ ‡ç­¾\"]),                 (\"D\\\\+1 open / future\", [r\"D\\+1\""
            },
            {
              "regex": "æ ‡ç­¾",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "tio\": 0.6,             \"checks\": [                 (\"labels/æ ‡ç­¾\", [r\"\\blabels?\\b\", r\"make_labels\", r\"label_table\", r\"æ ‡ç­¾\"]),"
            }
          ]
        },
        {
          "check": "D\\+1 open / future",
          "ok": true,
          "regex": [
            "D\\+1",
            "next[_-]?day",
            "\\bopen\\b.*next",
            "future",
            "æœªæ¥"
          ],
          "evidence": [
            {
              "regex": "future",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
              "snippet": "from __future__ import annotations  import argparse import json import sy"
            },
            {
              "regex": "D\\+1",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "apshot Immutableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨  LLM ä¸ç®—"
            },
            {
              "regex": "future",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "  Python å†™ reconciliation_logï¼ˆæ¬¡æ—¥å¼€è·‘å‰å¿…é¡»é€šè¿‡ï¼‰  11) å› å­å­˜å‚¨ï¼šå®½è¡¨ vs é•¿è¡¨ï¼ˆFuture Proofingï¼‰ V1 é€‰æ‹©ï¼šå®½è¡¨ï¼ˆå¿«ã€ç®€å•ï¼‰  factors_daily(date, code, f1, f2,"
            },
            {
              "regex": "æœªæ¥",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "æ¡é“å¾‹  Snapshot Immutableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨"
            },
            {
              "regex": "D\\+1",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "],         },         \"M1\": {             \"title\": \"labels (D+1 open â†’ D+h close) + ä¸€å­—æ¿ buyable=0\",             \"pass_ratio"
            },
            {
              "regex": "\\bopen\\b.*next",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "e_labels\", r\"label_table\", r\"æ ‡ç­¾\"]),                 (\"D\\\\+1 open / future\", [r\"D\\+1\", r\"next[_-]?day\", r\"\\bopen\\b.*next\", r\"future\", r\"æœªæ¥\"]),                 (\"close D\\\\+h\", [r\"cl"
            }
          ]
        },
        {
          "check": "close D\\+h",
          "ok": true,
          "regex": [
            "close.*D\\+\\d+",
            "horizon",
            "holding_days",
            "æŒæœ‰.*å¤©"
          ],
          "evidence": [
            {
              "regex": "æŒæœ‰.*å¤©",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": "å€™é€‰åˆ†æ•°è‡³å°‘é«˜å‡ºå¤šå°‘æ‰è§¦å‘æ¢ä»“     BEAR_SEED_SWAP_MIN_HOLD = 2       # ç«ç§æœ€å°‘æŒæœ‰å¤©æ•°ï¼ˆé¿å…å½“å¤©é¢‘ç¹æ¢ï¼‰     BEAR_SEED_SWAP_COOLDOWN = 3       # ä¸¤æ¬¡æ¢ä»“æœ€å°é—´éš”å¤©æ•°     "
            },
            {
              "regex": "horizon",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "æœªæ¥\"]),                 (\"close D\\\\+h\", [r\"close.*D\\+\\d+\", r\"horizon\", r\"holding_days\", r\"æŒæœ‰.*å¤©\"]),                 (\"æ¶¨è·Œåœ/ä¸€å­—æ¿\", "
            },
            {
              "regex": "holding_days",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "           (\"close D\\\\+h\", [r\"close.*D\\+\\d+\", r\"horizon\", r\"holding_days\", r\"æŒæœ‰.*å¤©\"]),                 (\"æ¶¨è·Œåœ/ä¸€å­—æ¿\", [r\"up_limit|low_l"
            },
            {
              "regex": "æŒæœ‰.*å¤©",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "e D\\\\+h\", [r\"close.*D\\+\\d+\", r\"horizon\", r\"holding_days\", r\"æŒæœ‰.*å¤©\"]),                 (\"æ¶¨è·Œåœ/ä¸€å­—æ¿\", [r\"up_limit|low_limit|limit"
            }
          ]
        },
        {
          "check": "æ¶¨è·Œåœ/ä¸€å­—æ¿",
          "ok": true,
          "regex": [
            "up_limit|low_limit|limit_up|limit_down",
            "ä¸€å­—æ¿",
            "buyable",
            "å¯ä¹°"
          ],
          "evidence": [
            {
              "regex": "up_limit|low_limit|limit_up|limit_down",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "tableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨  LLM ä¸ç®—æ•°ï¼šPython å…ˆç®—æ‰€æœ‰ç»Ÿè®¡ï¼Œ"
            },
            {
              "regex": "ä¸€å­—æ¿",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " + å®¹ç¾ï¼‰  snapshotâ†’å› å­â†’é¢„å¤„ç†â†’è§„åˆ™åˆ†â†’TopN  æ ‡ç­¾ï¼ˆOpen D+1 â†’ Close D+hï¼‰+ ä¸€å­—æ¿ä¹°ä¸è¿›æƒé‡ä¸º 0  ç»„åˆè´¦æœ¬ï¼ˆBuffer Zone + æˆæœ¬ + å–ä¸å‡ºé”ä»“ + T+1 èµ„é‡‘ç»“ç®—ï¼‰  ç›‘æ§ï¼ˆIC_I"
            },
            {
              "regex": "buyable",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "inal_score åˆæˆ + é£é™©é—¨æ§ï¼‰  LabelEngineï¼ˆOpen D+1 â†’ Close D+hï¼›ä¸€å­—æ¿ buyable æƒé‡ 0ï¼‰  PortfolioManagerï¼ˆBuffer+æˆæœ¬+é”ä»“+T+1 ç»“ç®—ï¼‰  MonitorEngine"
            },
            {
              "regex": "å¯ä¹°",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": " return ok     else:         # è¿‡æ»¤ç»“æœä¸ºç©ºï¼šå®å¯é€€å›åŸæ± ï¼Œé¿å…å› æ•°æ®/é˜ˆå€¼é—®é¢˜å¯¼è‡´â€œæ— è‚¡å¯ä¹°â€         _log(\"[FUND] åŸºæœ¬é¢è¿‡æ»¤ç»“æœä¸ºç©ºï¼Œé€€å›åŸå§‹ universe\")         ret"
            },
            {
              "regex": "up_limit|low_limit|limit_up|limit_down",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "r\"holding_days\", r\"æŒæœ‰.*å¤©\"]),                 (\"æ¶¨è·Œåœ/ä¸€å­—æ¿\", [r\"up_limit|low_limit|limit_up|limit_down\", r\"ä¸€å­—æ¿\", r\"buyable\", r\"å¯ä¹°\"])"
            },
            {
              "regex": "ä¸€å­—æ¿",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "1\": {             \"title\": \"labels (D+1 open â†’ D+h close) + ä¸€å­—æ¿ buyable=0\",             \"pass_ratio\": 0.6,             \"che"
            }
          ]
        }
      ]
    },
    "M2": {
      "title": "portfolioï¼ˆBuffer/æˆæœ¬/é”ä»“/T+1ç»“ç®—ï¼‰",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 4,
      "total_checks": 4,
      "details": [
        {
          "check": "portfolio/æŒä»“ç°¿",
          "ok": true,
          "regex": [
            "\\bportfolio\\b",
            "Position",
            "holdings",
            "æŒä»“"
          ],
          "evidence": [
            {
              "regex": "æŒä»“",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "  æœ¬åŒ…ç›®æ ‡ï¼š**æœ¬åœ° Python è´Ÿè´£å†³ç­–/é£æ§/ç›‘æ§/å‡ºå•æ–‡ä»¶**ï¼ŒPTrade è´Ÿè´£**çœŸå®ä¸‹å•/çœŸå®æˆäº¤/çœŸå®æŒä»“**ï¼Œä¸¤ç«¯é€šè¿‡ `bridge/` ç›®å½•æ–‡ä»¶æ¡æ‰‹å®Œæˆé—­ç¯ã€‚  ---  ## 1) Windows å¿«é€Ÿå¯åŠ¨ï¼ˆUIï¼‰  "
            },
            {
              "regex": "\\bportfolio\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "lï¼Œå…¨éƒ¨å¼€å…³åŒ–ï¼‰  ï¼ˆæ²¿ç”¨ä½ ç°æœ‰é‚£ä»½ cfg ç»“æ„ï¼šdata_source / trade_cal / model / portfolio / monitor / sanity / asset_check / executionï¼‰  13) æœ€å°å¼€å·¥é¡ºåºï¼ˆå¼º"
            },
            {
              "regex": "Position",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "é“é—¸é—¨  åŸå­å†™ orders.csv  10.3 æ”¶ç›˜å  PTrade å¯¼å‡º exec_report + real_positions  Python å†™ reconciliation_logï¼ˆæ¬¡æ—¥å¼€è·‘å‰å¿…é¡»é€šè¿‡ï¼‰  11) å› å­å­˜å‚¨ï¼šå®½è¡¨ vs é•¿è¡¨"
            },
            {
              "regex": "æŒä»“",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "nï¼šè´Ÿè´£æ•°æ®æ²»ç†ã€é€‰è‚¡ã€åŒå¤´æ¨¡å‹æ¨ç†ã€é£é™©é—¸é—¨ã€å‡ºå•æ–‡ä»¶ã€ç›‘æ§ã€å½’å› ã€æŠ¥å‘Š  PTradeï¼šè´Ÿè´£çœŸå®ä¸‹å•ã€çœŸå®æˆäº¤ã€çœŸå®æŒä»“ä¸èµ„äº§  ä¸¤ç«¯é€šè¿‡æ–‡ä»¶åè®® + æ¯æ—¥å¯¹è´¦é—­ç¯ï¼Œè¾¾åˆ°ï¼šå¯å¤ç›˜ã€å¯æ‰§è¡Œã€å¯é•¿æœŸç¨³å®šè·‘  0.2 ä¸‰æ¡é“å¾‹  Snapshot"
            },
            {
              "regex": "\\bportfolio\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\config\\config.yaml",
              "snippet": "  severity_gte: 3     prob_gt: 0.3   downweight:     k: 0.3 portfolio:   max_position_per_stock: 0.2   max_daily_turnover: 1.0   "
            },
            {
              "regex": "Position",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\config\\config.yaml",
              "snippet": "     prob_gt: 0.3   downweight:     k: 0.3 portfolio:   max_position_per_stock: 0.2   max_daily_turnover: 1.0   buffer_buy_rank_"
            }
          ]
        },
        {
          "check": "æˆæœ¬/æ‰‹ç»­è´¹/æ»‘ç‚¹",
          "ok": true,
          "regex": [
            "commission|fee|cost",
            "slippage",
            "æ‰‹ç»­è´¹",
            "æ»‘ç‚¹",
            "äº¤æ˜“æˆæœ¬"
          ],
          "evidence": [
            {
              "regex": "commission|fee|cost",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": "_state_from_positions(ctx=None):     \"\"\"é‡å¯/æ–­çº¿åæ¢å¤ï¼šç”¨å®é™…æŒä»“çš„ avg_cost è¡¥é½ entry/highest ç­‰çŠ¶æ€ã€‚\"\"\"     try:         pos = _safe_posit"
            },
            {
              "regex": "commission|fee|cost",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "on\", r\"holdings\", r\"æŒä»“\"]),                 (\"æˆæœ¬/æ‰‹ç»­è´¹/æ»‘ç‚¹\", [r\"commission|fee|cost\", r\"slippage\", r\"æ‰‹ç»­è´¹\", r\"æ»‘ç‚¹\", r\"äº¤æ˜“æˆæœ¬\"]),          "
            },
            {
              "regex": "slippage",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "),                 (\"æˆæœ¬/æ‰‹ç»­è´¹/æ»‘ç‚¹\", [r\"commission|fee|cost\", r\"slippage\", r\"æ‰‹ç»­è´¹\", r\"æ»‘ç‚¹\", r\"äº¤æ˜“æˆæœ¬\"]),                 (\"Buffer\", [r\"\\"
            },
            {
              "regex": "æ‰‹ç»­è´¹",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "b\", r\"Position\", r\"holdings\", r\"æŒä»“\"]),                 (\"æˆæœ¬/æ‰‹ç»­è´¹/æ»‘ç‚¹\", [r\"commission|fee|cost\", r\"slippage\", r\"æ‰‹ç»­è´¹\", r\"æ»‘ç‚¹\", r"
            },
            {
              "regex": "æ»‘ç‚¹",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "r\"Position\", r\"holdings\", r\"æŒä»“\"]),                 (\"æˆæœ¬/æ‰‹ç»­è´¹/æ»‘ç‚¹\", [r\"commission|fee|cost\", r\"slippage\", r\"æ‰‹ç»­è´¹\", r\"æ»‘ç‚¹\", r\"äº¤æ˜“"
            },
            {
              "regex": "äº¤æ˜“æˆæœ¬",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "æ»‘ç‚¹\", [r\"commission|fee|cost\", r\"slippage\", r\"æ‰‹ç»­è´¹\", r\"æ»‘ç‚¹\", r\"äº¤æ˜“æˆæœ¬\"]),                 (\"Buffer\", [r\"\\bbuffer\\b\", r\"rebalance_"
            }
          ]
        },
        {
          "check": "Buffer",
          "ok": true,
          "regex": [
            "\\bbuffer\\b",
            "rebalance_buffer",
            "ç¼“å†²"
          ],
          "evidence": [
            {
              "regex": "\\bbuffer\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "å­â†’é¢„å¤„ç†â†’è§„åˆ™åˆ†â†’TopN  æ ‡ç­¾ï¼ˆOpen D+1 â†’ Close D+hï¼‰+ ä¸€å­—æ¿ä¹°ä¸è¿›æƒé‡ä¸º 0  ç»„åˆè´¦æœ¬ï¼ˆBuffer Zone + æˆæœ¬ + å–ä¸å‡ºé”ä»“ + T+1 èµ„é‡‘ç»“ç®—ï¼‰  ç›‘æ§ï¼ˆIC_IR å»å™ª + æˆæœ¬æ‹–ç´¯ + å¼ºåº¦ç›‘æ§ + "
            },
            {
              "regex": "\\bbuffer\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "         },         \"M2\": {             \"title\": \"portfolioï¼ˆBuffer/æˆæœ¬/é”ä»“/T+1ç»“ç®—ï¼‰\",             \"pass_ratio\": 0.6,             \""
            },
            {
              "regex": "rebalance_buffer",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "ç‚¹\", r\"äº¤æ˜“æˆæœ¬\"]),                 (\"Buffer\", [r\"\\bbuffer\\b\", r\"rebalance_buffer\", r\"ç¼“å†²\"]),                 (\"é”ä»“/T\\\\+1\", [r\"T\\+1\", r\"settle\""
            },
            {
              "regex": "ç¼“å†²",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "          (\"Buffer\", [r\"\\bbuffer\\b\", r\"rebalance_buffer\", r\"ç¼“å†²\"]),                 (\"é”ä»“/T\\\\+1\", [r\"T\\+1\", r\"settle\", r\"set"
            },
            {
              "regex": "\\bbuffer\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\engine\\portfolio.py",
              "snippet": "der]:         \"\"\"Create orders to move towards targets with Buffer Zone rules.\"\"\"         trade_date = str(trade_date)        "
            }
          ]
        },
        {
          "check": "é”ä»“/T\\+1",
          "ok": true,
          "regex": [
            "T\\+1",
            "settle",
            "settlement",
            "lock",
            "é”ä»“",
            "ç»“ç®—"
          ],
          "evidence": [
            {
              "regex": "T\\+1",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " â†’ Close D+hï¼‰+ ä¸€å­—æ¿ä¹°ä¸è¿›æƒé‡ä¸º 0  ç»„åˆè´¦æœ¬ï¼ˆBuffer Zone + æˆæœ¬ + å–ä¸å‡ºé”ä»“ + T+1 èµ„é‡‘ç»“ç®—ï¼‰  ç›‘æ§ï¼ˆIC_IR å»å™ª + æˆæœ¬æ‹–ç´¯ + å¼ºåº¦ç›‘æ§ + åˆ†æ­§ç›‘æ§ï¼‰  Night/Morning ä¸¤æ®µä½œ"
            },
            {
              "regex": "é”ä»“",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "n D+1 â†’ Close D+hï¼‰+ ä¸€å­—æ¿ä¹°ä¸è¿›æƒé‡ä¸º 0  ç»„åˆè´¦æœ¬ï¼ˆBuffer Zone + æˆæœ¬ + å–ä¸å‡ºé”ä»“ + T+1 èµ„é‡‘ç»“ç®—ï¼‰  ç›‘æ§ï¼ˆIC_IR å»å™ª + æˆæœ¬æ‹–ç´¯ + å¼ºåº¦ç›‘æ§ + åˆ†æ­§ç›‘æ§ï¼‰  Night/Morni"
            },
            {
              "regex": "ç»“ç®—",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "se D+hï¼‰+ ä¸€å­—æ¿ä¹°ä¸è¿›æƒé‡ä¸º 0  ç»„åˆè´¦æœ¬ï¼ˆBuffer Zone + æˆæœ¬ + å–ä¸å‡ºé”ä»“ + T+1 èµ„é‡‘ç»“ç®—ï¼‰  ç›‘æ§ï¼ˆIC_IR å»å™ª + æˆæœ¬æ‹–ç´¯ + å¼ºåº¦ç›‘æ§ + åˆ†æ­§ç›‘æ§ï¼‰  Night/Morning ä¸¤æ®µä½œä¸šï¼ˆæ™¨é—´å®š"
            },
            {
              "regex": "lock",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": "DD_RED    = 0.20      # â€”â€” å¹¿åº¦é—¸é—¨ï¼ˆä¸¤æ—¥ç¡®è®¤ï¼‰& å¼±åŠ¿è§‚å¯Ÿ â€”â€”     BREADTH_BLOCK_LEVEL   = 0.30     BREADTH_BLOCK_CONFIRM = 1     WEAK_OBSER"
            },
            {
              "regex": "lock",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\PTrade_Dumb_Executor.py",
              "snippet": "l = _normalize_symbol(ts_code)          # --- Replace this block with your broker's real order api.         # Example:      "
            },
            {
              "regex": "T\\+1",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "       \"M2\": {             \"title\": \"portfolioï¼ˆBuffer/æˆæœ¬/é”ä»“/T+1ç»“ç®—ï¼‰\",             \"pass_ratio\": 0.6,             \"checks\": ["
            }
          ]
        }
      ]
    },
    "M3": {
      "title": "monitor + factpack + execution_log + SQLite/WAL + æµ®ç‚¹isclose",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 5,
      "total_checks": 5,
      "details": [
        {
          "check": "monitor/ç›‘æ§",
          "ok": true,
          "regex": [
            "\\bmonitor\\b",
            "metrics",
            "telemetry",
            "ç›‘æ§"
          ],
          "evidence": [
            {
              "regex": "ç›‘æ§",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "tem V1.5ï¼ˆWindows UI + PTrade æ–‡ä»¶æ¡¥ï¼‰  æœ¬åŒ…ç›®æ ‡ï¼š**æœ¬åœ° Python è´Ÿè´£å†³ç­–/é£æ§/ç›‘æ§/å‡ºå•æ–‡ä»¶**ï¼ŒPTrade è´Ÿè´£**çœŸå®ä¸‹å•/çœŸå®æˆäº¤/çœŸå®æŒä»“**ï¼Œä¸¤ç«¯é€šè¿‡ `bridge/` ç›®å½•æ–‡ä»¶æ¡æ‰‹å®Œæˆé—­"
            },
            {
              "regex": "\\bmonitor\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ent_alpha / disagreement_risk_prob / disagreement_severity  Monitor è·Ÿè¸ªï¼šåˆ†æ­§é«˜æ˜¯å¦å¯¹åº”æ›´é«˜ realized_vol/mdd  åç»­å¯ä½œä¸ºé£é™©æƒ©ç½šæˆ–å…¥æ¨¡ç‰¹å¾ï¼ˆV1.5ï¼‰  8) åŒæ¨¡å‹"
            },
            {
              "regex": "ç›‘æ§",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "0) ç›®æ ‡ä¸ç¡¬è¾¹ç•Œ 0.1 ç³»ç»Ÿç›®æ ‡  æœ¬åœ° Pythonï¼šè´Ÿè´£æ•°æ®æ²»ç†ã€é€‰è‚¡ã€åŒå¤´æ¨¡å‹æ¨ç†ã€é£é™©é—¸é—¨ã€å‡ºå•æ–‡ä»¶ã€ç›‘æ§ã€å½’å› ã€æŠ¥å‘Š  PTradeï¼šè´Ÿè´£çœŸå®ä¸‹å•ã€çœŸå®æˆäº¤ã€çœŸå®æŒä»“ä¸èµ„äº§  ä¸¤ç«¯é€šè¿‡æ–‡ä»¶åè®® + æ¯æ—¥å¯¹è´¦é—­ç¯ï¼Œè¾¾åˆ°ï¼šå¯å¤ç›˜"
            },
            {
              "regex": "ç›‘æ§",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\PTrade_Dumb_Executor.py",
              "snippet": "ç° STOP æ–‡ä»¶ç«‹å³åœæ­¢ä¸‹å• - å¿ƒè·³ï¼šæŒç»­å†™ ptrade_heartbeat.json ä¾› Windows UI ç›‘æ§  âš ï¸ ä½ éœ€è¦æ ¹æ®åˆ¸å•†ç¯å¢ƒæŠŠä¸‹å•å‡½æ•°æ›¿æ¢ä¸ºå®é™…å¯ç”¨å‡½æ•°ï¼š - order / order_target / order"
            },
            {
              "regex": "\\bmonitor\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "        ],         },         \"M3\": {             \"title\": \"monitor + factpack + execution_log + SQLite/WAL + æµ®ç‚¹isclose\",      "
            },
            {
              "regex": "metrics",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "hecks\": [                 (\"monitor/ç›‘æ§\", [r\"\\bmonitor\\b\", r\"metrics\", r\"telemetry\", r\"ç›‘æ§\"]),                 (\"FactPack\", [r\"Fa"
            }
          ]
        },
        {
          "check": "FactPack",
          "ok": true,
          "regex": [
            "FactPack",
            "factpack",
            "facts_bundle",
            "è¯æ®åŒ…"
          ],
          "evidence": [
            {
              "regex": "FactPack",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "it ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨  LLM ä¸ç®—æ•°ï¼šPython å…ˆç®—æ‰€æœ‰ç»Ÿè®¡ï¼ŒLLM åªåŸºäº FactPack è¾“å‡ºè§£é‡Š/å»ºè®®ï¼ˆç»“æ„åŒ–ï¼‰  1) ç¯å¢ƒä¸è¿è¡Œå½¢æ€ï¼ˆå»ºè®®ï¼‰  Windowsï¼šå¼€å‘/è°ƒå‚/çœ‹æŠ¥è¡¨ï¼ˆè¿­ä»£å¿«ï¼‰  Ubunt"
            },
            {
              "regex": "factpack",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "it ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨  LLM ä¸ç®—æ•°ï¼šPython å…ˆç®—æ‰€æœ‰ç»Ÿè®¡ï¼ŒLLM åªåŸºäº FactPack è¾“å‡ºè§£é‡Š/å»ºè®®ï¼ˆç»“æ„åŒ–ï¼‰  1) ç¯å¢ƒä¸è¿è¡Œå½¢æ€ï¼ˆå»ºè®®ï¼‰  Windowsï¼šå¼€å‘/è°ƒå‚/çœ‹æŠ¥è¡¨ï¼ˆè¿­ä»£å¿«ï¼‰  Ubunt"
            },
            {
              "regex": "FactPack",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "         },         \"M3\": {             \"title\": \"monitor + factpack + execution_log + SQLite/WAL + æµ®ç‚¹isclose\",             \"pas"
            },
            {
              "regex": "factpack",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "         },         \"M3\": {             \"title\": \"monitor + factpack + execution_log + SQLite/WAL + æµ®ç‚¹isclose\",             \"pas"
            },
            {
              "regex": "facts_bundle",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": ",                 (\"FactPack\", [r\"FactPack\", r\"factpack\", r\"facts_bundle\", r\"è¯æ®åŒ…\"]),                 (\"execution_log/æ‰§è¡Œæ—¥å¿—\", [r\"execu"
            },
            {
              "regex": "è¯æ®åŒ…",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": " (\"FactPack\", [r\"FactPack\", r\"factpack\", r\"facts_bundle\", r\"è¯æ®åŒ…\"]),                 (\"execution_log/æ‰§è¡Œæ—¥å¿—\", [r\"execution[_-]"
            }
          ]
        },
        {
          "check": "execution_log/æ‰§è¡Œæ—¥å¿—",
          "ok": true,
          "regex": [
            "execution[_-]?log",
            "order_log",
            "fill_log",
            "æ‰§è¡Œæ—¥å¿—"
          ],
          "evidence": [
            {
              "regex": "execution[_-]?log",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "ght Job è¯»å–ï¼‰ - `data/quant.db`ï¼šSQLite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orders.csv`ï¼šMorning Job ç”Ÿæˆçš„è®¢å•æ–‡ä»¶ï¼ˆPTrade ç«¯è¯»"
            },
            {
              "regex": "execution[_-]?log",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "eï¼ˆæ¯æ—¥å¯¹è´¦ï¼‰  Gatesï¼ˆSTOP / Fat-Finger / AssetCheck / SmokeTestï¼‰  ExecutionLogï¼ˆrun_id/config_hash/model_version/prompt_hash å¯è¿½æº¯ï¼‰  7) åŒå¤´æ¨¡å‹ï¼ˆ"
            },
            {
              "regex": "execution[_-]?log",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\æµ£è·¨æ•¤å¨´ä½ºâ–¼_ç€¹å±¾æš£ç’‡å­˜æ§‘.md",
              "snippet": "ght Job è¯»å–ï¼‰ - `data/quant.db`ï¼šSQLite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orders.csv`ï¼šMorning Job ç”Ÿæˆçš„è®¢å•æ–‡ä»¶ï¼ˆPTrade ç«¯è¯»"
            },
            {
              "regex": "execution[_-]?log",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "         \"M3\": {             \"title\": \"monitor + factpack + execution_log + SQLite/WAL + æµ®ç‚¹isclose\",             \"pass_ratio\": 0.6,  "
            },
            {
              "regex": "order_log",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "            (\"execution_log/æ‰§è¡Œæ—¥å¿—\", [r\"execution[_-]?log\", r\"order_log\", r\"fill_log\", r\"æ‰§è¡Œæ—¥å¿—\"]),                 (\"SQLite + WAL\", "
            },
            {
              "regex": "fill_log",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "execution_log/æ‰§è¡Œæ—¥å¿—\", [r\"execution[_-]?log\", r\"order_log\", r\"fill_log\", r\"æ‰§è¡Œæ—¥å¿—\"]),                 (\"SQLite + WAL\", [r\"sqlite\", r"
            }
          ]
        },
        {
          "check": "SQLite + WAL",
          "ok": true,
          "regex": [
            "sqlite",
            "journal_mode\\s*=\\s*WAL",
            "PRAGMA\\s+journal_mode",
            "\\bWAL\\b"
          ],
          "evidence": [
            {
              "regex": "sqlite",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
              "snippet": "rc.jobs.morning_job import run_morning_job from src.storage.sqlite import connect from src.storage.schema import ensure_schema"
            },
            {
              "regex": "sqlite",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "Streamlit UIï¼ˆé‡åŒ–æŒ‡æŒ¥ä¸­å¿ƒï¼‰  ---  ## 2) ä¸€é”®ä¿®å¤ï¼ˆè§£å†³ä½ ç°åœ¨çš„æŠ¥é”™ï¼‰  ä½ æˆªå›¾çš„æŠ¥é”™å±äº **SQLite è¡¨ç»“æ„ç¼ºåˆ—**ï¼ˆæ—§åº“æ²¡ `rank_final` / `rank_rule`ï¼‰ã€‚  ä¿®å¤æ–¹å¼äºŒé€‰ä¸€ï¼š  ### æ–¹å¼ "
            },
            {
              "regex": "sqlite",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "bars/daily_bars.csv`ï¼šé€‰è‚¡è¾“å…¥æ•°æ®ï¼ˆNight Job è¯»å–ï¼‰ - `data/quant.db`ï¼šSQLite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orde"
            },
            {
              "regex": "sqlite",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "æƒé™¤æ¯/é€è½¬/åˆ†çº¢ï¼‰  UniversePolicyï¼ˆ300/688 exclude/penalty/shadowï¼‰  SQLite çƒ­ + Parquet å†·ï¼ˆæŒ‰æ—¥åˆ†åŒºï¼‰  snapshot_corrections + DataViewï¼ˆçº é”™è¡¥ä¸ï¼‰ "
            },
            {
              "regex": "\\bWAL\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ï¼ˆBuffer+æˆæœ¬+é”ä»“+T+1ï¼‰  M3ï¼šmonitor + factpack + execution_log + WAL + æµ®ç‚¹ isclose ç­–ç•¥  M4ï¼šNight/Morning + orders åè®® + dumb execut"
            },
            {
              "regex": "sqlite",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\æµ£è·¨æ•¤å¨´ä½ºâ–¼_ç€¹å±¾æš£ç’‡å­˜æ§‘.md",
              "snippet": "bars/daily_bars.csv`ï¼šé€‰è‚¡è¾“å…¥æ•°æ®ï¼ˆNight Job è¯»å–ï¼‰ - `data/quant.db`ï¼šSQLite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orde"
            }
          ]
        },
        {
          "check": "æµ®ç‚¹ isclose/round",
          "ok": true,
          "regex": [
            "math\\.isclose",
            "np\\.isclose",
            "\\bisclose\\b",
            "round\\(",
            "Decimal"
          ],
          "evidence": [
            {
              "regex": "math\\.isclose",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " æµ®ç‚¹ç²¾åº¦ï¼ˆéšå½¢åˆºå®¢ #2ï¼‰â€”â€”å¿…é¡»å†™æ­» 5.1 ç»Ÿä¸€æ¯”è¾ƒç­–ç•¥ï¼ˆå¯¹è´¦/èµ„äº§æ ¡éªŒï¼‰  ç¦æ­¢ç”¨ == æ¯”è¾ƒé‡‘é¢  ä½¿ç”¨ï¼š  math.isclose(a, b, rel_tol=1e-6, abs_tol=0.01)  æˆ–å¯¹é‡‘é¢ç»Ÿä¸€ round(x, 2) åå†æ¯”  "
            },
            {
              "regex": "\\bisclose\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "é—¸é—¨ + Smoke Test  äº¤æ˜“æ—¥å† trade_cal åˆ¤æ–­ï¼ˆæ¯å¤©éƒ½è·‘ï¼Œç”±ä»£ç åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥ï¼‰  æµ®ç‚¹æ¯”è¾ƒå®¹å¿ï¼ˆisclose/roundï¼‰ï¼Œé¿å…å¯¹è´¦è¯¯æŠ¥  V1.1 / V1.2ï¼ˆå¢å¼ºï¼‰  CorporateActionHandlerï¼ˆé™¤æƒé™¤æ¯"
            },
            {
              "regex": "round\\(",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ä½¿ç”¨ï¼š  math.isclose(a, b, rel_tol=1e-6, abs_tol=0.01)  æˆ–å¯¹é‡‘é¢ç»Ÿä¸€ round(x, 2) åå†æ¯”  5.2 å­˜å‚¨å»ºè®®  V1ï¼šé‡‘é¢å†™åº“å‰ç»Ÿä¸€ roundï¼ˆcash/total_assets/mark"
            },
            {
              "regex": "round\\(",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": "LOW < account_dd <= CFG.DD_RED:         max_hold=max(1, int(round(max_hold*0.6)))         per_stock*=0.6; enable_add=False    "
            },
            {
              "regex": "\\bisclose\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "\"PRAGMA\\s+journal_mode\", r\"\\bWAL\\b\"]),                 (\"æµ®ç‚¹ isclose/round\", [r\"math\\.isclose\", r\"np\\.isclose\", r\"\\bisclose\\b\", "
            },
            {
              "regex": "Decimal",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "th\\.isclose\", r\"np\\.isclose\", r\"\\bisclose\\b\", r\"round\\(\", r\"Decimal\"]),             ],         },         \"M4\": {             \""
            }
          ]
        }
      ]
    },
    "M4": {
      "title": "Night/Morning ä¸¤æ®µä½œä¸š + orders åè®® + å¯¹è´¦é—­ç¯ + trade_cal",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 6,
      "total_checks": 6,
      "details": [
        {
          "check": "Night_Job",
          "ok": true,
          "regex": [
            "Night[_-]?Job",
            "night_job",
            "nightly",
            "å¤œç›˜|å¤œé—´"
          ],
          "evidence": [
            {
              "regex": "Night[_-]?Job",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
              "snippet": "son import sys from datetime import datetime  from src.jobs.night_job import run_night_job from src.jobs.morning_job import run_m"
            },
            {
              "regex": "night_job",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
              "snippet": "son import sys from datetime import datetime  from src.jobs.night_job import run_night_job from src.jobs.morning_job import run_m"
            },
            {
              "regex": "Night[_-]?Job",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "E_DAY\")  4.2 trade_cal çš„ä½¿ç”¨  æ•°æ®æºï¼šTushare trade_calï¼ˆå»ºè®®ç¼“å­˜åˆ°æœ¬åœ°ï¼‰  Night_Jobï¼š  å¦‚æœä»Šå¤©éäº¤æ˜“æ—¥ï¼šé€€å‡º  å¦‚æœä»Šå¤©äº¤æ˜“æ—¥ä½†æ•°æ®æœªå°±ç»ªï¼šä¼˜é›…é€€å‡º DATA_NOT_READY  Morning_J"
            },
            {
              "regex": "night_job",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "E_DAY\")  4.2 trade_cal çš„ä½¿ç”¨  æ•°æ®æºï¼šTushare trade_calï¼ˆå»ºè®®ç¼“å­˜åˆ°æœ¬åœ°ï¼‰  Night_Jobï¼š  å¦‚æœä»Šå¤©éäº¤æ˜“æ—¥ï¼šé€€å‡º  å¦‚æœä»Šå¤©äº¤æ˜“æ—¥ä½†æ•°æ®æœªå°±ç»ªï¼šä¼˜é›…é€€å‡º DATA_NOT_READY  Morning_J"
            },
            {
              "regex": "Night[_-]?Job",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "pass_ratio\": 0.6,             \"checks\": [                 (\"Night_Job\", [r\"Night[_-]?Job\", r\"night_job\", r\"nightly\", r\"å¤œç›˜|å¤œé—´\"]), "
            },
            {
              "regex": "night_job",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "pass_ratio\": 0.6,             \"checks\": [                 (\"Night_Job\", [r\"Night[_-]?Job\", r\"night_job\", r\"nightly\", r\"å¤œç›˜|å¤œé—´\"]), "
            }
          ]
        },
        {
          "check": "Morning_Job",
          "ok": true,
          "regex": [
            "Morning[_-]?Job",
            "morning_job",
            "morning",
            "æ—©ç›˜|æ—©é—´"
          ],
          "evidence": [
            {
              "regex": "Morning[_-]?Job",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
              "snippet": " from src.jobs.night_job import run_night_job from src.jobs.morning_job import run_morning_job from src.storage.sqlite import conne"
            },
            {
              "regex": "morning_job",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
              "snippet": " from src.jobs.night_job import run_night_job from src.jobs.morning_job import run_morning_job from src.storage.sqlite import conne"
            },
            {
              "regex": "morning",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
              "snippet": " from src.jobs.night_job import run_night_job from src.jobs.morning_job import run_morning_job from src.storage.sqlite import c"
            },
            {
              "regex": "morning",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "ã€‚  ### Night Jobï¼ˆæ”¶ç›˜åï¼‰ ```bash python main.py night ```  ### Morning Jobï¼ˆ9:26ï¼‰ ```bash python main.py morning ```  ä¼šç”Ÿæˆï¼š - `data/"
            },
            {
              "regex": "morning",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\run_morning_job.bat",
              "snippet": "nv\\Scripts\\activate.bat\" set PYTHONPATH=%CD% python main.py morning "
            },
            {
              "regex": "morning",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "ksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orders.csv`ï¼šMorning Job ç”Ÿæˆçš„è®¢å•æ–‡ä»¶ï¼ˆPTrade ç«¯è¯»å–ï¼‰ - `bridge/outbox/orders_processed_*"
            }
          ]
        },
        {
          "check": "orders.csv / è®¢å•åè®®",
          "ok": true,
          "regex": [
            "orders\\.csv",
            "order(s)?_schema",
            "generate_orders",
            "è®¢å•åè®®"
          ],
          "evidence": [
            {
              "regex": "orders\\.csv",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "orning ```  ä¼šç”Ÿæˆï¼š - `data/quant.db`ï¼ˆSQLiteï¼‰ - `bridge/outbox/orders.csv`  ---  ## 4) PTrade ç«¯ï¼ˆReceiver / Dumb Executorï¼‰  åœ¨ PTrade ç¯"
            },
            {
              "regex": "orders\\.csv",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "Lite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orders.csv`ï¼šMorning Job ç”Ÿæˆçš„è®¢å•æ–‡ä»¶ï¼ˆPTrade ç«¯è¯»å–ï¼‰ - `bridge/outbox/orders_pr"
            },
            {
              "regex": "orders\\.csv",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "  éäº¤æ˜“æ—¥é€€å‡º  è¯»ç¼“å­˜ + è¯»å–ç«ä»·åå‚è€ƒä»·  é£é™©é—¨æ§ï¼ˆVeto/Downweightï¼‰+ å€™è¡¥æ›¿æ¢  å®šä»·ç”Ÿæˆ orders.csv  STOP / Fat-Finger / AssetCheck ä¸‰é“é—¸é—¨  åŸå­å†™ orders.csv  10.3 "
            },
            {
              "regex": "orders\\.csv",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\æµ£è·¨æ•¤å¨´ä½ºâ–¼_ç€¹å±¾æš£ç’‡å­˜æ§‘.md",
              "snippet": "Lite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orders.csv`ï¼šMorning Job ç”Ÿæˆçš„è®¢å•æ–‡ä»¶ï¼ˆPTrade ç«¯è¯»å–ï¼‰ - `bridge/outbox/orders_pr"
            },
            {
              "regex": "orders\\.csv",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\PTrade_Dumb_Executor.py",
              "snippet": "\"\"\"PTrade Dumb Executor (Receiver)  Design goals: - æåº¦æ„šè ¢ï¼šåªè¯» orders.csv é€è¡Œä¸‹å•ï¼Œä¸åšè®¡ç®— - é˜²é‡å¤ï¼šè¯»å rename ä¸º orders_processed_{date}_{run_id"
            },
            {
              "regex": "orders\\.csv",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": ", r\"morning_job\", r\"morning\", r\"æ—©ç›˜|æ—©é—´\"]),                 (\"orders.csv / è®¢å•åè®®\", [r\"orders\\.csv\", r\"order(s)?_schema\", r\"generate_o"
            }
          ]
        },
        {
          "check": "åŸå­å†™",
          "ok": true,
          "regex": [
            "atomic_write",
            "os\\.replace",
            "tempfile",
            "write.*tmp.*replace"
          ],
          "evidence": [
            {
              "regex": "atomic_write",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": ", r\"generate_orders\", r\"è®¢å•åè®®\"]),                 (\"åŸå­å†™\", [r\"atomic_write\", r\"os\\.replace\", r\"tempfile\", r\"write.*tmp.*replace\"]),   "
            },
            {
              "regex": "tempfile",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "                (\"åŸå­å†™\", [r\"atomic_write\", r\"os\\.replace\", r\"tempfile\", r\"write.*tmp.*replace\"]),                 (\"trade_cal / i"
            },
            {
              "regex": "write.*tmp.*replace",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "erate_orders\", r\"è®¢å•åè®®\"]),                 (\"åŸå­å†™\", [r\"atomic_write\", r\"os\\.replace\", r\"tempfile\", r\"write.*tmp.*replace\"]),                 (\"trade_cal / is_trade_day\", [r\"trade_c"
            },
            {
              "regex": "atomic_write",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\bridge\\orders.py",
              "snippet": "Path from typing import Optional  import pandas as pd   def atomic_write_csv(df: pd.DataFrame, out_path: str) -> None:     out = Pat"
            },
            {
              "regex": "atomic_write",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\core\\fsutil.py",
              "snippet": "one:     Path(path).mkdir(parents=True, exist_ok=True)  def atomic_write_text(path: str, text: str, tmp_path: str | None = None, enc"
            },
            {
              "regex": "os\\.replace",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\core\\fsutil.py",
              "snippet": "(tp.parent))     tp.write_text(text, encoding=encoding)     os.replace(str(tp), str(p))  # atomic on Windows NTFS for same volume "
            }
          ]
        },
        {
          "check": "trade_cal / is_trade_day",
          "ok": true,
          "regex": [
            "trade_cal",
            "is_trade_day",
            "äº¤æ˜“æ—¥å†",
            "calendar"
          ],
          "evidence": [
            {
              "regex": "trade_cal",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
              "snippet": "eck(trade_date)         if not ok:             print(\"WARN: trade_cal returned empty. Is this a trade date?\")         out_csv = u"
            },
            {
              "regex": "trade_cal",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " èµ„äº§å¼ºæ ¡éªŒ  STOP Kill Switch + Fat-Finger é—¸é—¨ + Smoke Test  äº¤æ˜“æ—¥å† trade_cal åˆ¤æ–­ï¼ˆæ¯å¤©éƒ½è·‘ï¼Œç”±ä»£ç åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥ï¼‰  æµ®ç‚¹æ¯”è¾ƒå®¹å¿ï¼ˆisclose/roundï¼‰ï¼Œé¿å…å¯¹è´¦è¯¯æŠ¥  V1.1 / V"
            },
            {
              "regex": "is_trade_day",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "4.1 äº¤æ˜“æ—¥åˆ¤æ–­åŸåˆ™  å®šæ—¶ä»»åŠ¡ï¼šæ¯å¤©éƒ½è·‘ï¼ˆä¸è¦ä¾èµ–â€œå‘¨ä¸€åˆ°å‘¨äº”â€ï¼‰ Pipeline å¯åŠ¨ç¬¬ä¸€æ­¥ï¼š  if not is_trade_day(today_cn): log_and_exit(\"NOT_TRADE_DAY\")  4.2 trade_cal çš„ä½¿ç”¨"
            },
            {
              "regex": "äº¤æ˜“æ—¥å†",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "æ—¥å¯¹è´¦ + èµ„äº§å¼ºæ ¡éªŒ  STOP Kill Switch + Fat-Finger é—¸é—¨ + Smoke Test  äº¤æ˜“æ—¥å† trade_cal åˆ¤æ–­ï¼ˆæ¯å¤©éƒ½è·‘ï¼Œç”±ä»£ç åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥ï¼‰  æµ®ç‚¹æ¯”è¾ƒå®¹å¿ï¼ˆisclose/roundï¼‰ï¼Œé¿å…å¯¹è´¦è¯¯æŠ¥"
            },
            {
              "regex": "calendar",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " æœ€å°å®Œæ•´é—­ç¯ï¼‰ 6.1 æ ¸å¿ƒæ¨¡å—  DataSourcePolicy + ClientFactory  TradingCalendarï¼ˆtrade_cal ç¼“å­˜ + is_trade_dayï¼‰  DataAdapterï¼ˆæ¸…æ´—ã€tradeableã€å¼‚å¸¸æ£€æµ‹"
            },
            {
              "regex": "trade_cal",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "          \"title\": \"Night/Morning ä¸¤æ®µä½œä¸š + orders åè®® + å¯¹è´¦é—­ç¯ + trade_cal\",             \"pass_ratio\": 0.6,             \"checks\": [   "
            }
          ]
        },
        {
          "check": "reconcile/å¯¹è´¦",
          "ok": true,
          "regex": [
            "reconcile",
            "ledger",
            "å¯¹è´¦",
            "match.*broker"
          ],
          "evidence": [
            {
              "regex": "å¯¹è´¦",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "é™©é—¸é—¨ã€å‡ºå•æ–‡ä»¶ã€ç›‘æ§ã€å½’å› ã€æŠ¥å‘Š  PTradeï¼šè´Ÿè´£çœŸå®ä¸‹å•ã€çœŸå®æˆäº¤ã€çœŸå®æŒä»“ä¸èµ„äº§  ä¸¤ç«¯é€šè¿‡æ–‡ä»¶åè®® + æ¯æ—¥å¯¹è´¦é—­ç¯ï¼Œè¾¾åˆ°ï¼šå¯å¤ç›˜ã€å¯æ‰§è¡Œã€å¯é•¿æœŸç¨³å®šè·‘  0.2 ä¸‰æ¡é“å¾‹  Snapshot Immutableï¼ˆappend-on"
            },
            {
              "regex": "reconcile",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": " r\"is_trade_day\", r\"äº¤æ˜“æ—¥å†\", r\"calendar\"]),                 (\"reconcile/å¯¹è´¦\", [r\"reconcile\", r\"ledger\", r\"å¯¹è´¦\", r\"match.*broker\"]),  "
            },
            {
              "regex": "ledger",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "endar\"]),                 (\"reconcile/å¯¹è´¦\", [r\"reconcile\", r\"ledger\", r\"å¯¹è´¦\", r\"match.*broker\"]),             ],         },     "
            },
            {
              "regex": "å¯¹è´¦",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "\": {             \"title\": \"Night/Morning ä¸¤æ®µä½œä¸š + orders åè®® + å¯¹è´¦é—­ç¯ + trade_cal\",             \"pass_ratio\": 0.6,             "
            },
            {
              "regex": "match.*broker",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "        (\"reconcile/å¯¹è´¦\", [r\"reconcile\", r\"ledger\", r\"å¯¹è´¦\", r\"match.*broker\"]),             ],         },         \"M5\": {             \""
            },
            {
              "regex": "å¯¹è´¦",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ui\\views\\dashboard.py",
              "snippet": "æ˜“\", done=False, active=False)     with col4: _stage_card(\"æ”¶ç›˜å¯¹è´¦\", done=False, active=False)      # 3) è¡ŒåŠ¨å»ºè®®     if phase == "
            }
          ]
        }
      ]
    },
    "M5": {
      "title": "STOP + Fat-Finger + AssetCheck + smoke test",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 4,
      "total_checks": 4,
      "details": [
        {
          "check": "STOP/ç†”æ–­",
          "ok": true,
          "regex": [
            "\\bSTOP\\b",
            "circuit_breaker",
            "kill_switch",
            "ç†”æ–­",
            "ä¿é™©ä¸"
          ],
          "evidence": [
            {
              "regex": "\\bSTOP\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "py`ï¼š**SchemaMigratorï¼ˆè¡¥é½ç¼ºåˆ—ï¼‰** - `bridge/`ï¼šæ–‡ä»¶æ¡¥ï¼ˆoutbox/inbox + STOP Kill Switchï¼‰ - `ptrade/`ï¼šPTrade Receiver + ä½ åŸæ¥çš„ç­–ç•¥è„šæœ¬å‰¯æœ¬  --- "
            },
            {
              "regex": "ç†”æ–­",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "ç‰ˆå±äº **è„šæ‰‹æ¶å®ç°**ï¼šä¸ä¼šä¾èµ–å¤–éƒ¨æŒ‡æ•°æ•°æ®ï¼Œåç»­ä½ æ¥å…¥ IndexSnapshot åå¯å‡çº§æˆçœŸå® MA20 / ç†”æ–­é€»è¾‘ï¼‰ã€‚  åŒå¤´æ¨¡å‹ï¼š - `model.enabled` é»˜è®¤ `false`ï¼ˆShadow æ¨¡å¼ï¼‰ - UI ä¼šä»ç„¶"
            },
            {
              "regex": "\\bSTOP\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "x/ptrade_heartbeat.json`ï¼šPTrade å¿ƒè·³ï¼ˆUI ç«¯ç”¨æ¥ç‚¹äº®â€œäº¤æ˜“ç«¯â€ï¼‰ - `bridge/STOP`ï¼šç´§æ€¥ç†”æ–­ï¼ˆKILLï¼‰  ---  ## 1. ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼ˆWindowsï¼‰  ### 1.1 å®‰è£…ä¾èµ–å¹¶å¯åŠ¨ UI "
            },
            {
              "regex": "ç†”æ–­",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "_heartbeat.json`ï¼šPTrade å¿ƒè·³ï¼ˆUI ç«¯ç”¨æ¥ç‚¹äº®â€œäº¤æ˜“ç«¯â€ï¼‰ - `bridge/STOP`ï¼šç´§æ€¥ç†”æ–­ï¼ˆKILLï¼‰  ---  ## 1. ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼ˆWindowsï¼‰  ### 1.1 å®‰è£…ä¾èµ–å¹¶å¯åŠ¨ UI åœ¨é¡¹ç›®æ ¹ç›®å½•"
            },
            {
              "regex": "\\bSTOP\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ï¼ˆæ™¨é—´å®šä»·è§£å†³é›†åˆç«ä»·é»‘éšœåŒºï¼‰  æ–‡ä»¶åè®® + PTrade Dumb Executor  æ¯æ—¥å¯¹è´¦ + èµ„äº§å¼ºæ ¡éªŒ  STOP Kill Switch + Fat-Finger é—¸é—¨ + Smoke Test  äº¤æ˜“æ—¥å† trade_cal åˆ¤æ–­"
            },
            {
              "regex": "ç†”æ–­",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ok / HTML æ™¨æŠ¥ / reset_db  V1.5ï¼ˆè‡ªé€‚åº”å¼€å…³ï¼‰  RegimeEngineï¼ˆMA20 + è·Œå¹…ç†”æ–­ + è½»æƒé‡åˆ‡æ¢ï¼‰  Volatility Damper  NewsSnapshotï¼ˆè‹¥æ–°é—»å…¥åˆ†åˆ™å¿…é¡»å¿«ç…§åŒ–ï¼‰  å¼ºåº¦é—¨"
            }
          ]
        },
        {
          "check": "Fat-Finger",
          "ok": true,
          "regex": [
            "fat[_-]?finger",
            "order_size_limit",
            "price_guard",
            "è¯¯æ“ä½œ"
          ],
          "evidence": [
            {
              "regex": "fat[_-]?finger",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "åè®® + PTrade Dumb Executor  æ¯æ—¥å¯¹è´¦ + èµ„äº§å¼ºæ ¡éªŒ  STOP Kill Switch + Fat-Finger é—¸é—¨ + Smoke Test  äº¤æ˜“æ—¥å† trade_cal åˆ¤æ–­ï¼ˆæ¯å¤©éƒ½è·‘ï¼Œç”±ä»£ç åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥ï¼‰  æµ®ç‚¹æ¯”è¾ƒå®¹å¿"
            },
            {
              "regex": "fat[_-]?finger",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\config\\config.yaml",
              "snippet": "  buffer_buy_rank_le: 5   buffer_sell_rank_gt: 20 sanity:   fat_finger:     max_lines: 30     max_notional_per_order: 500000   ass"
            },
            {
              "regex": "fat[_-]?finger",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": " ],         },         \"M5\": {             \"title\": \"STOP + Fat-Finger + AssetCheck + smoke test\",             \"pass_ratio\": 0.6, "
            },
            {
              "regex": "order_size_limit",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "é™©ä¸\"]),                 (\"Fat-Finger\", [r\"fat[_-]?finger\", r\"order_size_limit\", r\"price_guard\", r\"è¯¯æ“ä½œ\"]),                 (\"AssetCheck\", "
            },
            {
              "regex": "price_guard",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "  (\"Fat-Finger\", [r\"fat[_-]?finger\", r\"order_size_limit\", r\"price_guard\", r\"è¯¯æ“ä½œ\"]),                 (\"AssetCheck\", [r\"asset[_-]?che"
            },
            {
              "regex": "è¯¯æ“ä½œ",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": " [r\"fat[_-]?finger\", r\"order_size_limit\", r\"price_guard\", r\"è¯¯æ“ä½œ\"]),                 (\"AssetCheck\", [r\"asset[_-]?check\", r\"b"
            }
          ]
        },
        {
          "check": "AssetCheck",
          "ok": true,
          "regex": [
            "asset[_-]?check",
            "balance_check",
            "èµ„é‡‘æ ¡éªŒ",
            "èµ„äº§æ ¡éªŒ"
          ],
          "evidence": [
            {
              "regex": "asset[_-]?check",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "torï¼‰  ReconciliationEngineï¼ˆæ¯æ—¥å¯¹è´¦ï¼‰  Gatesï¼ˆSTOP / Fat-Finger / AssetCheck / SmokeTestï¼‰  ExecutionLogï¼ˆrun_id/config_hash/model_version"
            },
            {
              "regex": "èµ„äº§æ ¡éªŒ",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "  ä»…åœ¨äº¤æ˜“æ—¥è¿è¡Œï¼Œå¦åˆ™é€€å‡º  5) SQLite æµ®ç‚¹ç²¾åº¦ï¼ˆéšå½¢åˆºå®¢ #2ï¼‰â€”â€”å¿…é¡»å†™æ­» 5.1 ç»Ÿä¸€æ¯”è¾ƒç­–ç•¥ï¼ˆå¯¹è´¦/èµ„äº§æ ¡éªŒï¼‰  ç¦æ­¢ç”¨ == æ¯”è¾ƒé‡‘é¢  ä½¿ç”¨ï¼š  math.isclose(a, b, rel_tol=1e-6, abs_to"
            },
            {
              "regex": "asset[_-]?check",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\config\\config.yaml",
              "snippet": "ger:     max_lines: 30     max_notional_per_order: 500000   asset_check:     enabled: false     max_abs_diff: 0.01     max_rel_diff"
            },
            {
              "regex": "asset[_-]?check",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": ",         \"M5\": {             \"title\": \"STOP + Fat-Finger + AssetCheck + smoke test\",             \"pass_ratio\": 0.6,             \""
            },
            {
              "regex": "balance_check",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "ä½œ\"]),                 (\"AssetCheck\", [r\"asset[_-]?check\", r\"balance_check\", r\"èµ„é‡‘æ ¡éªŒ\", r\"èµ„äº§æ ¡éªŒ\"]),                 (\"smoke test\", [r\"smo"
            },
            {
              "regex": "èµ„é‡‘æ ¡éªŒ",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "    (\"AssetCheck\", [r\"asset[_-]?check\", r\"balance_check\", r\"èµ„é‡‘æ ¡éªŒ\", r\"èµ„äº§æ ¡éªŒ\"]),                 (\"smoke test\", [r\"smoke[_-]?te"
            }
          ]
        },
        {
          "check": "smoke test",
          "ok": true,
          "regex": [
            "smoke[_-]?test",
            "sanity_check",
            "self_check",
            "å†’çƒŸæµ‹è¯•"
          ],
          "evidence": [
            {
              "regex": "smoke[_-]?test",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "liationEngineï¼ˆæ¯æ—¥å¯¹è´¦ï¼‰  Gatesï¼ˆSTOP / Fat-Finger / AssetCheck / SmokeTestï¼‰  ExecutionLogï¼ˆrun_id/config_hash/model_version/prompt_hash"
            },
            {
              "regex": "sanity_check",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "æ ¡éªŒ\"]),                 (\"smoke test\", [r\"smoke[_-]?test\", r\"sanity_check\", r\"self_check\", r\"å†’çƒŸæµ‹è¯•\"]),             ],         },      "
            },
            {
              "regex": "self_check",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "      (\"smoke test\", [r\"smoke[_-]?test\", r\"sanity_check\", r\"self_check\", r\"å†’çƒŸæµ‹è¯•\"]),             ],         },         \"M6\": {     "
            },
            {
              "regex": "å†’çƒŸæµ‹è¯•",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "est\", [r\"smoke[_-]?test\", r\"sanity_check\", r\"self_check\", r\"å†’çƒŸæµ‹è¯•\"]),             ],         },         \"M6\": {             \""
            }
          ]
        }
      ]
    },
    "M6": {
      "title": "åŒå¤´æ¨¡å‹ shadowï¼ˆbatch+context+ç†”æ–­é™çº§ï¼‰",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 4,
      "total_checks": 4,
      "details": [
        {
          "check": "dual head",
          "ok": true,
          "regex": [
            "dual[_-]?head",
            "two[_-]?head",
            "åŒå¤´"
          ],
          "evidence": [
            {
              "regex": "åŒå¤´",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "æ¶å®ç°**ï¼šä¸ä¼šä¾èµ–å¤–éƒ¨æŒ‡æ•°æ•°æ®ï¼Œåç»­ä½ æ¥å…¥ IndexSnapshot åå¯å‡çº§æˆçœŸå® MA20 / ç†”æ–­é€»è¾‘ï¼‰ã€‚  åŒå¤´æ¨¡å‹ï¼š - `model.enabled` é»˜è®¤ `false`ï¼ˆShadow æ¨¡å¼ï¼‰ - UI ä¼šä»ç„¶å±•ç¤ºâ€œè¾©è®ºåº­â€å¡"
            },
            {
              "regex": "dual[_-]?head",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": "*PTrade å¿ƒè·³**ï¼ˆå·¦ä¾§å˜ç»¿ï¼‰+ **orders_processed å›æ‰§**ï¼ˆé—­ç¯ï¼‰   > 3) æ¥å…¥ **DualHeadModelEngine** çœŸå®è°ƒç”¨ **DeepSeek + Qwen(OpenAI Compatible)**ï¼Œè®©ã€Œ"
            },
            {
              "regex": "dual[_-]?head",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "rank_pctï¼›å¹¶ä¿ç•™ raw/zscore ç»™å¼ºåº¦ç›‘æ§ï¼‰  RuleScoreï¼ˆrule_score ä¸»å¹²å…œåº•ï¼‰  DualHeadModelEngineï¼ˆAlpha+Riskï¼šDeepSeek-V3.2 + qwen3-maxï¼Œæ‰¹å¤„ç†+ä¸Šä¸‹æ–‡å¯¹é½ï¼‰ "
            },
            {
              "regex": "åŒå¤´",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "0) ç›®æ ‡ä¸ç¡¬è¾¹ç•Œ 0.1 ç³»ç»Ÿç›®æ ‡  æœ¬åœ° Pythonï¼šè´Ÿè´£æ•°æ®æ²»ç†ã€é€‰è‚¡ã€åŒå¤´æ¨¡å‹æ¨ç†ã€é£é™©é—¸é—¨ã€å‡ºå•æ–‡ä»¶ã€ç›‘æ§ã€å½’å› ã€æŠ¥å‘Š  PTradeï¼šè´Ÿè´£çœŸå®ä¸‹å•ã€çœŸå®æˆäº¤ã€çœŸå®æŒä»“ä¸èµ„äº§  ä¸¤ç«¯é€šè¿‡æ–‡ä»¶å"
            },
            {
              "regex": "dual[_-]?head",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\æµ£è·¨æ•¤å¨´ä½ºâ–¼_ç€¹å±¾æš£ç’‡å­˜æ§‘.md",
              "snippet": "*PTrade å¿ƒè·³**ï¼ˆå·¦ä¾§å˜ç»¿ï¼‰+ **orders_processed å›æ‰§**ï¼ˆé—­ç¯ï¼‰   > 3) æ¥å…¥ **DualHeadModelEngine** çœŸå®è°ƒç”¨ **DeepSeek + Qwen(OpenAI Compatible)**ï¼Œè®©ã€Œ"
            },
            {
              "regex": "åŒå¤´",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "        ],         },         \"M6\": {             \"title\": \"åŒå¤´æ¨¡å‹ shadowï¼ˆbatch+context+ç†”æ–­é™çº§ï¼‰\",             \"pass_ratio\": 0."
            }
          ]
        },
        {
          "check": "shadow mode",
          "ok": true,
          "regex": [
            "shadow",
            "dry_run",
            "æ—è·¯"
          ],
          "evidence": [
            {
              "regex": "shadow",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "t åå¯å‡çº§æˆçœŸå® MA20 / ç†”æ–­é€»è¾‘ï¼‰ã€‚  åŒå¤´æ¨¡å‹ï¼š - `model.enabled` é»˜è®¤ `false`ï¼ˆShadow æ¨¡å¼ï¼‰ - UI ä¼šä»ç„¶å±•ç¤ºâ€œè¾©è®ºåº­â€å¡ç‰‡ï¼Œä½†æ–‡æ¡ˆä¼šæç¤ºæ¨¡å‹æœªå¯ç”¨  ---  ## å…è´£å£°æ˜ æœ¬åŒ…ä¸ºå·¥ç¨‹æ¨¡æ¿ï¼Œä¸æ„æˆ"
            },
            {
              "regex": "shadow",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
              "snippet": " TopN/Top20 éªŒè¯ï¼Œå†é€æ­¥åŠ ã€‚  ---  ## 8. å¸¸è§é—®é¢˜  ### 8.1 â€œAI è¾©è®ºåº­æ²¡æ•°æ® / shadow disabledâ€ - `model.enabled` è¿˜æ˜¯ `false` - æˆ– Key æ²¡å¡«/æ²¡é‡å¯ UI - "
            },
            {
              "regex": "shadow",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "Handlerï¼ˆé™¤æƒé™¤æ¯/é€è½¬/åˆ†çº¢ï¼‰  UniversePolicyï¼ˆ300/688 exclude/penalty/shadowï¼‰  SQLite çƒ­ + Parquet å†·ï¼ˆæŒ‰æ—¥åˆ†åŒºï¼‰  snapshot_corrections + DataVi"
            },
            {
              "regex": "æ—è·¯",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "COLUMN  åºŸå¼ƒå› å­æ ‡è®° deprecatedï¼Œä¸å†æ›´æ–°ä½†ä¿ç•™å­—æ®µ  é•¿è¡¨ï¼ˆEAVï¼‰ç­–ç•¥ï¼šä¸å»ºè®® V1 åˆ‡  å¯ä½œä¸ºæ—è·¯åˆ†æå­˜å‚¨ï¼ˆä¸å½±å“çº¿ä¸Šç®—åˆ†ï¼‰  æˆ–æŠŠé«˜ç»´å› å­/è®­ç»ƒé›†æ”¾åˆ° Parquetï¼ˆæ›´é€‚åˆè®­ç»ƒï¼‰  12) é…ç½®è§„èŒƒï¼ˆcfg.yam"
            },
            {
              "regex": "shadow",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\æµ£è·¨æ•¤å¨´ä½ºâ–¼_ç€¹å±¾æš£ç’‡å­˜æ§‘.md",
              "snippet": " TopN/Top20 éªŒè¯ï¼Œå†é€æ­¥åŠ ã€‚  ---  ## 8. å¸¸è§é—®é¢˜  ### 8.1 â€œAI è¾©è®ºåº­æ²¡æ•°æ® / shadow disabledâ€ - `model.enabled` è¿˜æ˜¯ `false` - æˆ– Key æ²¡å¡«/æ²¡é‡å¯ UI - "
            },
            {
              "regex": "shadow",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "   ],         },         \"M6\": {             \"title\": \"åŒå¤´æ¨¡å‹ shadowï¼ˆbatch+context+ç†”æ–­é™çº§ï¼‰\",             \"pass_ratio\": 0.6,       "
            }
          ]
        },
        {
          "check": "batch/context",
          "ok": true,
          "regex": [
            "\\bbatch\\b",
            "context",
            "ä¸Šä¸‹æ–‡"
          ],
          "evidence": [
            {
              "regex": "\\bbatch\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "STOP + Fat-Finger + AssetCheck + smoke test  M6ï¼šåŒå¤´æ¨¡å‹ shadowï¼ˆbatch+context+ç†”æ–­ï¼‰  M7ï¼šå¼€é—¸ rerank + risk gate  M8ï¼šé™¤æƒé™¤æ¯ + Parquet + "
            },
            {
              "regex": "context",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "isk_severity <= 2 â†’ weight *= (1 - k*risk_prob)  å…¶ä½™ OK  7.3 Context Alignmentï¼ˆä¸¤æ¨¡å‹åŒä¸€ market_context_snapshotï¼‰  ç”± Python ç”Ÿæˆå®¢è§‚ con"
            },
            {
              "regex": "ä¸Šä¸‹æ–‡",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ualHeadModelEngineï¼ˆAlpha+Riskï¼šDeepSeek-V3.2 + qwen3-maxï¼Œæ‰¹å¤„ç†+ä¸Šä¸‹æ–‡å¯¹é½ï¼‰  ScoreComposerï¼ˆfinal_score åˆæˆ + é£é™©é—¨æ§ï¼‰  LabelEngineï¼ˆOpen "
            },
            {
              "regex": "context",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": "             c = ctx if ctx is not None else globals().get(\"context\", None)             if c is None:                  return {"
            },
            {
              "regex": "context",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\PTrade_Dumb_Executor.py",
              "snippet": " orders.append(row)     return orders   def _process_orders(context, orders, order_func):     # order_func must be provided by "
            },
            {
              "regex": "\\bbatch\\b",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "       },         \"M6\": {             \"title\": \"åŒå¤´æ¨¡å‹ shadowï¼ˆbatch+context+ç†”æ–­é™çº§ï¼‰\",             \"pass_ratio\": 0.6,             "
            }
          ]
        },
        {
          "check": "fallback/é™çº§",
          "ok": true,
          "regex": [
            "fallback",
            "degrade",
            "graceful",
            "é™çº§",
            "çº¯è§„åˆ™"
          ],
          "evidence": [
            {
              "regex": "fallback",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "x(risk_sev_ds, risk_sev_qw)  åˆ†æ­§è¿‡å¤§æˆ–ä½ç½®ä¿¡åº¦ï¼šæ ‡è®° uncertain â†’ æå‡é£é™©æˆ– fallback è§„åˆ™åˆ†  8.3 æ‰¹å¤„ç†ï¼ˆBatchingï¼‰  Rule TopM=200  10~20 åª/æ‰¹  å•æ—¥è°ƒç”¨æ¬¡æ•°çº¦ 2"
            },
            {
              "regex": "degrade",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "Night_Job é¢„ç®—ï¼‰  night_model_budget_secï¼ˆå¦‚ 1200sï¼‰  è¶…æ—¶ç«‹å³é™çº§ï¼š  è®°å½• degraded_reason=timeout  å½“å¤©å‡ºå•èµ° pure_ruleï¼ˆæœ€ç¨³ï¼‰  9) å…³é”®â€œå®ç›˜æ‘©æ“¦â€æŠ¤æ ï¼ˆå…¨éƒ¨å†™æ­»ï¼‰  "
            },
            {
              "regex": "é™çº§",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "rl + token æ³¨å…¥ï¼‰  tushare_official  manual_csv  cache_only  è‡ªåŠ¨é™çº§ï¼š  proxy ä¸å¯ç”¨/å¤±è´¥è¿‡å¤š â†’ æ–­è·¯å™¨ open â†’ è‡ªåŠ¨ cache_only  å…è®¸ manual_csv "
            },
            {
              "regex": "fallback",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\PTrade_Dumb_Executor.py",
              "snippet": "processed)     except Exception:         # if rename fails, fallback to copy+remove         try:             import shutil      "
            },
            {
              "regex": "fallback",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "xt\", [r\"\\bbatch\\b\", r\"context\", r\"ä¸Šä¸‹æ–‡\"]),                 (\"fallback/é™çº§\", [r\"fallback\", r\"degrade\", r\"graceful\", r\"é™çº§\", r\"çº¯è§„åˆ™\"])"
            },
            {
              "regex": "degrade",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": ", r\"ä¸Šä¸‹æ–‡\"]),                 (\"fallback/é™çº§\", [r\"fallback\", r\"degrade\", r\"graceful\", r\"é™çº§\", r\"çº¯è§„åˆ™\"]),             ],         },  "
            }
          ]
        }
      ]
    },
    "M7": {
      "title": "å¼€é—¸ rerank + risk gate",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 3,
      "total_checks": 3,
      "details": [
        {
          "check": "rerank",
          "ok": true,
          "regex": [
            "rerank",
            "re-rank",
            "äºŒæ¬¡æ’åº"
          ],
          "evidence": [
            {
              "regex": "rerank",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "w append-only å…¥åº“ï¼ˆå«å®¡è®¡å­—æ®µï¼‰  å› å­â†’é¢„å¤„ç†â†’RuleScoreâ†’TopM  åŒå¤´æ¨¡å‹ï¼ˆshadow/rerankï¼‰æ‰¹å¤„ç†æ¨ç†ï¼Œå†™ model_scores_dailyï¼ˆé¢„ç®—ç†”æ–­ï¼‰  ç”Ÿæˆ plan è‰æ¡ˆï¼ˆä¸å®šä»·ï¼‰  10.2 Mor"
            },
            {
              "regex": "rerank",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\config\\config.yaml",
              "snippet": "0   deepseek_model: deepseek-chat   qwen_model: qwen3-max   rerank_enabled: true risk_gate:   veto:     severity_gte: 3     pr"
            },
            {
              "regex": "rerank",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "     ],         },         \"M7\": {             \"title\": \"å¼€é—¸ rerank + risk gate\",             \"pass_ratio\": 0.6,             \"c"
            },
            {
              "regex": "re-rank",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "       \"checks\": [                 (\"rerank\", [r\"rerank\", r\"re-rank\", r\"äºŒæ¬¡æ’åº\"]),                 (\"risk gate\", [r\"risk[_-]?gate"
            },
            {
              "regex": "äºŒæ¬¡æ’åº",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "ks\": [                 (\"rerank\", [r\"rerank\", r\"re-rank\", r\"äºŒæ¬¡æ’åº\"]),                 (\"risk gate\", [r\"risk[_-]?gate\", r\"gate"
            },
            {
              "regex": "rerank",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\engine\\score_composer.py",
              "snippet": "numeric(me[col], errors=\"coerce\").fillna(d[col])          # rerank alpha (optional)         if mode == \"rerank\":             #"
            }
          ]
        },
        {
          "check": "risk gate",
          "ok": true,
          "regex": [
            "risk[_-]?gate",
            "gatekeeper",
            "risk_filter",
            "é£æ§é—¸é—¨"
          ],
          "evidence": [
            {
              "regex": "risk[_-]?gate",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\config\\config.yaml",
              "snippet": "eepseek-chat   qwen_model: qwen3-max   rerank_enabled: true risk_gate:   veto:     severity_gte: 3     prob_gt: 0.3   downweight:"
            },
            {
              "regex": "gatekeeper",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "äºŒæ¬¡æ’åº\"]),                 (\"risk gate\", [r\"risk[_-]?gate\", r\"gatekeeper\", r\"risk_filter\", r\"é£æ§é—¸é—¨\"]),                 (\"canary/ç°åº¦\", "
            },
            {
              "regex": "risk_filter",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "          (\"risk gate\", [r\"risk[_-]?gate\", r\"gatekeeper\", r\"risk_filter\", r\"é£æ§é—¸é—¨\"]),                 (\"canary/ç°åº¦\", [r\"canary\", r\"ro"
            },
            {
              "regex": "é£æ§é—¸é—¨",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": " gate\", [r\"risk[_-]?gate\", r\"gatekeeper\", r\"risk_filter\", r\"é£æ§é—¸é—¨\"]),                 (\"canary/ç°åº¦\", [r\"canary\", r\"rollout\", r"
            },
            {
              "regex": "é£æ§é—¸é—¨",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ui\\components.py",
              "snippet": "G_JOB\":         st.warning(\"â˜€ï¸ **æ™¨é—´å®šä»·è¿è¡Œä¸­ (09:26)**ï¼šè¯»å–ç«ä»·ä¿¡æ¯ â†’ é£æ§é—¸é—¨ â†’ ç”Ÿæˆ orders.csv â€¦\")     else:         st.success(\"âœ… ç³»ç»Ÿå¾…å‘½ (I"
            },
            {
              "regex": "risk[_-]?gate",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\core\\sqlite_store.py",
              "snippet": "flow_score REAL,             filter_flags TEXT,             risk_gate_action TEXT,             risk_prob REAL,             risk_s"
            }
          ]
        },
        {
          "check": "canary/ç°åº¦",
          "ok": true,
          "regex": [
            "canary",
            "rollout",
            "ç°åº¦",
            "å¼€é—¸"
          ],
          "evidence": [
            {
              "regex": "å¼€é—¸",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "setCheck + smoke test  M6ï¼šåŒå¤´æ¨¡å‹ shadowï¼ˆbatch+context+ç†”æ–­ï¼‰  M7ï¼šå¼€é—¸ rerank + risk gate  M8ï¼šé™¤æƒé™¤æ¯ + Parquet + Patch + Dashboard +"
            },
            {
              "regex": "canary",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "r\"gatekeeper\", r\"risk_filter\", r\"é£æ§é—¸é—¨\"]),                 (\"canary/ç°åº¦\", [r\"canary\", r\"rollout\", r\"ç°åº¦\", r\"å¼€é—¸\"]),             ],"
            },
            {
              "regex": "rollout",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "er\", r\"é£æ§é—¸é—¨\"]),                 (\"canary/ç°åº¦\", [r\"canary\", r\"rollout\", r\"ç°åº¦\", r\"å¼€é—¸\"]),             ],         },         \"M8\": {"
            },
            {
              "regex": "ç°åº¦",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "eeper\", r\"risk_filter\", r\"é£æ§é—¸é—¨\"]),                 (\"canary/ç°åº¦\", [r\"canary\", r\"rollout\", r\"ç°åº¦\", r\"å¼€é—¸\"]),             ],   "
            },
            {
              "regex": "å¼€é—¸",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "        ],         },         \"M7\": {             \"title\": \"å¼€é—¸ rerank + risk gate\",             \"pass_ratio\": 0.6,        "
            }
          ]
        }
      ]
    },
    "M8": {
      "title": "é™¤æƒé™¤æ¯ + Parquet + Patch/Registry/Migrator + Dashboard + Regime",
      "done": true,
      "ratio": 1.0,
      "passed_checks": 5,
      "total_checks": 5,
      "details": [
        {
          "check": "é™¤æƒé™¤æ¯",
          "ok": true,
          "regex": [
            "ex[_-]?div",
            "dividend",
            "split",
            "é™¤æƒ",
            "é™¤æ¯"
          ],
          "evidence": [
            {
              "regex": "é™¤æƒ",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "lose/roundï¼‰ï¼Œé¿å…å¯¹è´¦è¯¯æŠ¥  V1.1 / V1.2ï¼ˆå¢å¼ºï¼‰  CorporateActionHandlerï¼ˆé™¤æƒé™¤æ¯/é€è½¬/åˆ†çº¢ï¼‰  UniversePolicyï¼ˆ300/688 exclude/penalty/shadowï¼‰  S"
            },
            {
              "regex": "é™¤æ¯",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "se/roundï¼‰ï¼Œé¿å…å¯¹è´¦è¯¯æŠ¥  V1.1 / V1.2ï¼ˆå¢å¼ºï¼‰  CorporateActionHandlerï¼ˆé™¤æƒé™¤æ¯/é€è½¬/åˆ†çº¢ï¼‰  UniversePolicyï¼ˆ300/688 exclude/penalty/shadowï¼‰  SQL"
            },
            {
              "regex": "split",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": "te(s):     if not s: return None     try:         y,m,d = s.split(\"-\"); return date(int(y), int(m), int(d))     except: retur"
            },
            {
              "regex": "dividend",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "     \"checks\": [                 (\"é™¤æƒé™¤æ¯\", [r\"ex[_-]?div\", r\"dividend\", r\"split\", r\"é™¤æƒ\", r\"é™¤æ¯\"]),                 (\"Parquet\", [r\""
            },
            {
              "regex": "split",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": ": [                 (\"é™¤æƒé™¤æ¯\", [r\"ex[_-]?div\", r\"dividend\", r\"split\", r\"é™¤æƒ\", r\"é™¤æ¯\"]),                 (\"Parquet\", [r\"parquet\", "
            },
            {
              "regex": "é™¤æƒ",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "        ],         },         \"M8\": {             \"title\": \"é™¤æƒé™¤æ¯ + Parquet + Patch/Registry/Migrator + Dashboard + Regime\""
            }
          ]
        },
        {
          "check": "Parquet",
          "ok": true,
          "regex": [
            "parquet",
            "pyarrow",
            "fastparquet"
          ],
          "evidence": [
            {
              "regex": "parquet",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": " UniversePolicyï¼ˆ300/688 exclude/penalty/shadowï¼‰  SQLite çƒ­ + Parquet å†·ï¼ˆæŒ‰æ—¥åˆ†åŒºï¼‰  snapshot_corrections + DataViewï¼ˆçº é”™è¡¥ä¸ï¼‰  IndexSnapsh"
            },
            {
              "regex": "parquet",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": " ],         },         \"M8\": {             \"title\": \"é™¤æƒé™¤æ¯ + Parquet + Patch/Registry/Migrator + Dashboard + Regime\",           "
            },
            {
              "regex": "pyarrow",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": " r\"é™¤æƒ\", r\"é™¤æ¯\"]),                 (\"Parquet\", [r\"parquet\", r\"pyarrow\", r\"fastparquet\"]),                 (\"SchemaMigrator/Regist"
            },
            {
              "regex": "fastparquet",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "\"]),                 (\"Parquet\", [r\"parquet\", r\"pyarrow\", r\"fastparquet\"]),                 (\"SchemaMigrator/Registry\", [r\"SchemaMi"
            }
          ]
        },
        {
          "check": "SchemaMigrator/Registry",
          "ok": true,
          "regex": [
            "SchemaMigrator",
            "migrat",
            "registry",
            "è¿ç§»",
            "æ³¨å†Œ"
          ],
          "evidence": [
            {
              "regex": "SchemaMigrator",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": " - `src/jobs/`ï¼šNight/Morning ä½œä¸š - `src/storage/schema.py`ï¼š**SchemaMigratorï¼ˆè¡¥é½ç¼ºåˆ—ï¼‰** - `bridge/`ï¼šæ–‡ä»¶æ¡¥ï¼ˆoutbox/inbox + STOP Kill Switchï¼‰ - "
            },
            {
              "regex": "migrat",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "c/jobs/`ï¼šNight/Morning ä½œä¸š - `src/storage/schema.py`ï¼š**SchemaMigratorï¼ˆè¡¥é½ç¼ºåˆ—ï¼‰** - `bridge/`ï¼šæ–‡ä»¶æ¡¥ï¼ˆoutbox/inbox + STOP Kill Switchï¼‰ "
            },
            {
              "regex": "SchemaMigrator",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "rs_daily(date, code, f1, f2, ...)  V1.1 å¢å¼ºï¼šFactorRegistry + SchemaMigratorï¼ˆæ¨èå¿…åšï¼‰  å› å­æ³¨å†Œè¡¨ç»Ÿä¸€å£°æ˜ï¼ˆname/dtype/category/statusï¼‰  å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹ç¼ºåˆ—å¹¶ AL"
            },
            {
              "regex": "migrat",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ly(date, code, f1, f2, ...)  V1.1 å¢å¼ºï¼šFactorRegistry + SchemaMigratorï¼ˆæ¨èå¿…åšï¼‰  å› å­æ³¨å†Œè¡¨ç»Ÿä¸€å£°æ˜ï¼ˆname/dtype/category/statusï¼‰  å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹ç¼ºåˆ—å¹¶ "
            },
            {
              "regex": "registry",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "çº é”™è¡¥ä¸ï¼‰  IndexSnapshotï¼ˆæŒ‡æ•°å¿«ç…§ï¼‰  AttributionBucketsï¼ˆå½’å› åˆ†ç±»ï¼‰  FactorRegistry + è‡ªåŠ¨ schema è¿ç§»ï¼ˆå› å­åŠ¨ç‰©å›­å¯æ§ï¼‰  ResearchLoader / Webhook / HTML æ™¨æŠ¥"
            },
            {
              "regex": "è¿ç§»",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ç¨³å®šï¼‰  æ¨èï¼šWindows å¼€å‘ + Ubuntu/Docker ç”Ÿäº§ V1 å…ˆåœ¨ Windows è·‘é€šé—­ç¯ï¼Œç¨³å®šåè¿ç§»ç”Ÿäº§ç¯å¢ƒã€‚  2) ç‰ˆæœ¬è·¯çº¿å›¾ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ V1ï¼ˆå¿…é¡»å…·å¤‡ï¼šå¯ä¿¡ + èƒ½æ‰§è¡Œ + æŠ—çœŸå®æ‘©æ“¦ï¼‰  æ•°æ®æºæ²»ç†ï¼ˆç¬¬ä¸‰æ–¹ T"
            }
          ]
        },
        {
          "check": "Dashboard",
          "ok": true,
          "regex": [
            "dashboard",
            "streamlit",
            "gradio",
            "å¯è§†åŒ–"
          ],
          "evidence": [
            {
              "regex": "streamlit",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": "åè¿›å…¥ç›®å½•   2. åŒå‡»è¿è¡Œï¼š`run_ui.bat`  é»˜è®¤ä¼šï¼š - åˆ›å»º `.venv` - å®‰è£…ä¾èµ– - å¯åŠ¨ Streamlit UIï¼ˆé‡åŒ–æŒ‡æŒ¥ä¸­å¿ƒï¼‰  ---  ## 2) ä¸€é”®ä¿®å¤ï¼ˆè§£å†³ä½ ç°åœ¨çš„æŠ¥é”™ï¼‰  ä½ æˆªå›¾çš„æŠ¥é”™å±äº **SQLite è¡¨ç»“"
            },
            {
              "regex": "streamlit",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\requirements.txt",
              "snippet": "streamlit>=1.36,<2.0 pandas>=2.0,<3.0 numpy>=1.24,<3.0 PyYAML>=6.0,<7"
            },
            {
              "regex": "streamlit",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\run_ui.bat",
              "snippet": "p python -m pip install -r requirements.txt  REM 3) env set STREAMLIT_CONFIG_DIR=%CD%\\config\\.streamlit set PYTHONPATH=%CD%  REM "
            },
            {
              "regex": "dashboard",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "+ç†”æ–­ï¼‰  M7ï¼šå¼€é—¸ rerank + risk gate  M8ï¼šé™¤æƒé™¤æ¯ + Parquet + Patch + Dashboard + Regimeâ€¦"
            },
            {
              "regex": "dashboard",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "       \"title\": \"é™¤æƒé™¤æ¯ + Parquet + Patch/Registry/Migrator + Dashboard + Regime\",             \"pass_ratio\": 0.6,             \"chec"
            },
            {
              "regex": "streamlit",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "ç§»\", r\"æ³¨å†Œ\"]),                 (\"Dashboard\", [r\"dashboard\", r\"streamlit\", r\"gradio\", r\"å¯è§†åŒ–\"]),                 (\"Regime\", [r\"regime"
            }
          ]
        },
        {
          "check": "Regime",
          "ok": true,
          "regex": [
            "regime",
            "market_state",
            "ç‰›ç†Š",
            "çŠ¶æ€æœº"
          ],
          "evidence": [
            {
              "regex": "regime",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
              "snippet": " ## 6) ä½ æçš„ V1.5 åŠŸèƒ½å¼€å…³  `config/config.yaml`ï¼š  - `v1_5.enable_regime_engine` - `v1_5.enable_vol_damper` - `v1_5.enable_strength_"
            },
            {
              "regex": "regime",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
              "snippet": "ResearchLoader / Webhook / HTML æ™¨æŠ¥ / reset_db  V1.5ï¼ˆè‡ªé€‚åº”å¼€å…³ï¼‰  RegimeEngineï¼ˆMA20 + è·Œå¹…ç†”æ–­ + è½»æƒé‡åˆ‡æ¢ï¼‰  Volatility Damper  NewsSnapshot"
            },
            {
              "regex": "regime",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\config\\config.yaml",
              "snippet": ":     trend: 0.5     flow: 0.3     fund: 0.2 v1_5:   enable_regime_engine: true   enable_vol_damper: true   enable_strength_ga"
            },
            {
              "regex": "market_state",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
              "snippet": "rn _to_list(df[\"close\"],keep=n)     except: return []  def _market_state():     for idx in CFG.IDX300:         cl=_index_close(idx,1"
            },
            {
              "regex": "regime",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "e\": \"é™¤æƒé™¤æ¯ + Parquet + Patch/Registry/Migrator + Dashboard + Regime\",             \"pass_ratio\": 0.6,             \"checks\": [   "
            },
            {
              "regex": "market_state",
              "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
              "snippet": "gradio\", r\"å¯è§†åŒ–\"]),                 (\"Regime\", [r\"regime\", r\"market_state\", r\"ç‰›ç†Š\", r\"çŠ¶æ€æœº\"]),             ],         },     }   # ===="
            }
          ]
        }
      ]
    }
  },
  "hard_guards": {
    "append_only_snapshot": {
      "desc": "snapshot_raw append-onlyï¼ˆå°½é‡åªæœ‰ INSERTï¼Œä¸åš UPDATE/DELETE è¦†ç›–å†å²ï¼‰",
      "ok": true,
      "found_positive": true,
      "found_negative": false,
      "positive_evidence": [
        {
          "regex": "snapshot_raw",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "åˆ°ï¼šå¯å¤ç›˜ã€å¯æ‰§è¡Œã€å¯é•¿æœŸç¨³å®šè·‘  0.2 ä¸‰æ¡é“å¾‹  Snapshot Immutableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/e"
        },
        {
          "regex": "append[_-]?only",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "åè®® + æ¯æ—¥å¯¹è´¦é—­ç¯ï¼Œè¾¾åˆ°ï¼šå¯å¤ç›˜ã€å¯æ‰§è¡Œã€å¯é•¿æœŸç¨³å®šè·‘  0.2 ä¸‰æ¡é“å¾‹  Snapshot Immutableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limi"
        },
        {
          "regex": "snapshot_raw",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "cks\": [                 (\"snapshot å­˜åœ¨\", [r\"\\bsnapshot\\b\", r\"snapshot_raw\", r\"snapshot_table\"]),                 (\"factors/å› å­\", [r\"\\b"
        },
        {
          "regex": "append[_-]?only",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "====== æ ¸å¿ƒâ€œç¡¬è¾¹ç•Œâ€ä¸“é¡¹æ£€æŸ¥ï¼ˆæ›´ä¸¥æ ¼ï¼‰ ============== HARD_GUARDS = {     \"append_only_snapshot\": {         \"desc\": \"snapshot_raw append-onlyï¼ˆå°½é‡åªæœ‰"
        },
        {
          "regex": "snapshot_raw",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\core\\sqlite_store.py",
          "snippet": "3.Connection) -> None:     \"\"\"Create V1 schema (append-only snapshot_raw + execution artifacts).\"\"\"     conn.executescript(         "
        },
        {
          "regex": "append[_-]?only",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\core\\sqlite_store.py",
          "snippet": "conn: sqlite3.Connection) -> None:     \"\"\"Create V1 schema (append-only snapshot_raw + execution artifacts).\"\"\"     conn.executescr"
        }
      ],
      "negative_evidence": []
    },
    "no_future_leak": {
      "desc": "é¿å…æœªæ¥æ•°æ®æ³„æ¼ï¼ˆD+1 open/up_limit/low_limit ä¸è¿›å…¥ D æ—¥ç‰¹å¾ï¼‰",
      "ok": true,
      "found_positive": true,
      "found_negative": false,
      "positive_evidence": [
        {
          "regex": "D\\+1",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "apshot Immutableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨  LLM ä¸ç®—"
        },
        {
          "regex": "up_limit|low_limit|limit_up|limit_down",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "tableï¼ˆappend-onlyï¼‰ï¼šsnapshot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨  LLM ä¸ç®—æ•°ï¼šPython å…ˆç®—æ‰€æœ‰ç»Ÿè®¡ï¼Œ"
        },
        {
          "regex": "label",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "shot_raw åªè¿½åŠ ä¸è¦†ç›–  ç¦æ­¢æœªæ¥æ•°æ®æ³„æ¼ï¼šD+1 çš„ open/up_limit/low_limit ç­‰åªè¿› labels/execï¼Œä¸è¿› D æ—¥ç‰¹å¾è¡¨  LLM ä¸ç®—æ•°ï¼šPython å…ˆç®—æ‰€æœ‰ç»Ÿè®¡ï¼ŒLLM åªåŸºäº FactPack è¾“å‡ºè§£"
        },
        {
          "regex": "D\\+1",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "],         },         \"M1\": {             \"title\": \"labels (D+1 open â†’ D+h close) + ä¸€å­—æ¿ buyable=0\",             \"pass_ratio"
        },
        {
          "regex": "up_limit|low_limit|limit_up|limit_down",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "r\"holding_days\", r\"æŒæœ‰.*å¤©\"]),                 (\"æ¶¨è·Œåœ/ä¸€å­—æ¿\", [r\"up_limit|low_limit|limit_up|limit_down\", r\"ä¸€å­—æ¿\", r\"buyable\", r\"å¯ä¹°\"])"
        },
        {
          "regex": "label",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "        ],         },         \"M1\": {             \"title\": \"labels (D+1 open â†’ D+h close) + ä¸€å­—æ¿ buyable=0\",             \"pass"
        }
      ],
      "negative_evidence": []
    },
    "trade_calendar_gate": {
      "desc": "pipeline é¦–æ­¥ is_trade_day / trade_cal gateï¼ˆéäº¤æ˜“æ—¥é€€å‡ºï¼‰",
      "ok": true,
      "found_positive": true,
      "found_negative": false,
      "positive_evidence": [
        {
          "regex": "trade_cal",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\main.py",
          "snippet": "eck(trade_date)         if not ok:             print(\"WARN: trade_cal returned empty. Is this a trade date?\")         out_csv = u"
        },
        {
          "regex": "is_trade_day",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "4.1 äº¤æ˜“æ—¥åˆ¤æ–­åŸåˆ™  å®šæ—¶ä»»åŠ¡ï¼šæ¯å¤©éƒ½è·‘ï¼ˆä¸è¦ä¾èµ–â€œå‘¨ä¸€åˆ°å‘¨äº”â€ï¼‰ Pipeline å¯åŠ¨ç¬¬ä¸€æ­¥ï¼š  if not is_trade_day(today_cn): log_and_exit(\"NOT_TRADE_DAY\")  4.2 trade_cal çš„ä½¿ç”¨"
        },
        {
          "regex": "trade_cal",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": " èµ„äº§å¼ºæ ¡éªŒ  STOP Kill Switch + Fat-Finger é—¸é—¨ + Smoke Test  äº¤æ˜“æ—¥å† trade_cal åˆ¤æ–­ï¼ˆæ¯å¤©éƒ½è·‘ï¼Œç”±ä»£ç åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥ï¼‰  æµ®ç‚¹æ¯”è¾ƒå®¹å¿ï¼ˆisclose/roundï¼‰ï¼Œé¿å…å¯¹è´¦è¯¯æŠ¥  V1.1 / V"
        },
        {
          "regex": "äº¤æ˜“æ—¥å†",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "æ—¥å¯¹è´¦ + èµ„äº§å¼ºæ ¡éªŒ  STOP Kill Switch + Fat-Finger é—¸é—¨ + Smoke Test  äº¤æ˜“æ—¥å† trade_cal åˆ¤æ–­ï¼ˆæ¯å¤©éƒ½è·‘ï¼Œç”±ä»£ç åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥ï¼‰  æµ®ç‚¹æ¯”è¾ƒå®¹å¿ï¼ˆisclose/roundï¼‰ï¼Œé¿å…å¯¹è´¦è¯¯æŠ¥"
        },
        {
          "regex": "is_trade_day",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "e\", r\"write.*tmp.*replace\"]),                 (\"trade_cal / is_trade_day\", [r\"trade_cal\", r\"is_trade_day\", r\"äº¤æ˜“æ—¥å†\", r\"calendar\"]),  "
        },
        {
          "regex": "trade_cal",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "          \"title\": \"Night/Morning ä¸¤æ®µä½œä¸š + orders åè®® + å¯¹è´¦é—­ç¯ + trade_cal\",             \"pass_ratio\": 0.6,             \"checks\": [   "
        }
      ],
      "negative_evidence": []
    },
    "float_isclose": {
      "desc": "é‡‘é¢/æ”¶ç›Š/å¯¹è´¦ä½¿ç”¨ isclose/round/Decimalï¼Œé¿å…ç›´æ¥ ==",
      "ok": true,
      "found_positive": true,
      "found_negative": false,
      "positive_evidence": [
        {
          "regex": "isclose",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "é—¸é—¨ + Smoke Test  äº¤æ˜“æ—¥å† trade_cal åˆ¤æ–­ï¼ˆæ¯å¤©éƒ½è·‘ï¼Œç”±ä»£ç åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥ï¼‰  æµ®ç‚¹æ¯”è¾ƒå®¹å¿ï¼ˆisclose/roundï¼‰ï¼Œé¿å…å¯¹è´¦è¯¯æŠ¥  V1.1 / V1.2ï¼ˆå¢å¼ºï¼‰  CorporateActionHandlerï¼ˆé™¤æƒé™¤æ¯"
        },
        {
          "regex": "round\\(",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "ä½¿ç”¨ï¼š  math.isclose(a, b, rel_tol=1e-6, abs_tol=0.01)  æˆ–å¯¹é‡‘é¢ç»Ÿä¸€ round(x, 2) åå†æ¯”  5.2 å­˜å‚¨å»ºè®®  V1ï¼šé‡‘é¢å†™åº“å‰ç»Ÿä¸€ roundï¼ˆcash/total_assets/mark"
        },
        {
          "regex": "round\\(",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\GXFC_v4_8_live_opt.py",
          "snippet": "LOW < account_dd <= CFG.DD_RED:         max_hold=max(1, int(round(max_hold*0.6)))         per_stock*=0.6; enable_add=False    "
        },
        {
          "regex": "isclose",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "itle\": \"monitor + factpack + execution_log + SQLite/WAL + æµ®ç‚¹isclose\",             \"pass_ratio\": 0.6,             \"checks\": [   "
        },
        {
          "regex": "Decimal",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "th\\.isclose\", r\"np\\.isclose\", r\"\\bisclose\\b\", r\"round\\(\", r\"Decimal\"]),             ],         },         \"M4\": {             \""
        },
        {
          "regex": "isclose",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\bridge\\reconciliation.py",
          "snippet": "t:     ok: bool     reason: str     details: str = \"\"   def isclose_money(a: float, b: float, rel_tol: float = 1e-6, abs_tol: f"
        }
      ],
      "negative_evidence": []
    },
    "sqlite_wal": {
      "desc": "SQLite WAL æˆ–åŒç­‰å¹¶å‘/å¯é æ€§è®¾ç½®",
      "ok": true,
      "found_positive": true,
      "found_negative": false,
      "positive_evidence": [
        {
          "regex": "\\bWAL\\b",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "ï¼ˆBuffer+æˆæœ¬+é”ä»“+T+1ï¼‰  M3ï¼šmonitor + factpack + execution_log + WAL + æµ®ç‚¹ isclose ç­–ç•¥  M4ï¼šNight/Morning + orders åè®® + dumb execut"
        },
        {
          "regex": "\\bWAL\\b",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": "      \"title\": \"monitor + factpack + execution_log + SQLite/WAL + æµ®ç‚¹isclose\",             \"pass_ratio\": 0.6,             \"c"
        },
        {
          "regex": "\\bWAL\\b",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\cli.py",
          "snippet": "orage\", {}) or {}).get(\"sqlite_path\", \"data/quant.db\"))     wal = bool((cfg.get(\"storage\", {}) or {}).get(\"wal\", True))    "
        },
        {
          "regex": "\\bWAL\\b",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ui\\backend.py",
          "snippet": "ash(cfg)  @st.cache_resource def get_conn(sqlite_path: str, wal: bool = True, busy_timeout_ms: int = 5000):     conn = conn"
        },
        {
          "regex": "journal_mode\\s*=\\s*WAL",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\core\\sqlite_store.py",
          "snippet": "foreign_keys=ON;\")     if wal:         conn.execute(\"PRAGMA journal_mode=WAL;\")         conn.execute(\"PRAGMA synchronous=NORMAL;\")     r"
        },
        {
          "regex": "PRAGMA\\s+journal_mode",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\src\\core\\sqlite_store.py",
          "snippet": "PRAGMA foreign_keys=ON;\")     if wal:         conn.execute(\"PRAGMA journal_mode=WAL;\")         conn.execute(\"PRAGMA synchronous=NORMAL;\")  "
        }
      ],
      "negative_evidence": []
    },
    "atomic_write_orders": {
      "desc": "orders è¾“å‡ºåŸå­å†™ï¼ˆtmp + replaceï¼‰é˜²æ­¢åŠå†™æ–‡ä»¶",
      "ok": true,
      "found_positive": true,
      "found_negative": false,
      "positive_evidence": [
        {
          "regex": "orders\\.csv",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\README.md",
          "snippet": "orning ```  ä¼šç”Ÿæˆï¼š - `data/quant.db`ï¼ˆSQLiteï¼‰ - `bridge/outbox/orders.csv`  ---  ## 4) PTrade ç«¯ï¼ˆReceiver / Dumb Executorï¼‰  åœ¨ PTrade ç¯"
        },
        {
          "regex": "orders\\.csv",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ä½¿ç”¨æµç¨‹_å®Œæ•´è¯´æ˜.md",
          "snippet": "Lite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orders.csv`ï¼šMorning Job ç”Ÿæˆçš„è®¢å•æ–‡ä»¶ï¼ˆPTrade ç«¯è¯»å–ï¼‰ - `bridge/outbox/orders_pr"
        },
        {
          "regex": "orders\\.csv",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\å¼€å‘è®¡åˆ’.txt",
          "snippet": "  éäº¤æ˜“æ—¥é€€å‡º  è¯»ç¼“å­˜ + è¯»å–ç«ä»·åå‚è€ƒä»·  é£é™©é—¨æ§ï¼ˆVeto/Downweightï¼‰+ å€™è¡¥æ›¿æ¢  å®šä»·ç”Ÿæˆ orders.csv  STOP / Fat-Finger / AssetCheck ä¸‰é“é—¸é—¨  åŸå­å†™ orders.csv  10.3 "
        },
        {
          "regex": "orders\\.csv",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\æµ£è·¨æ•¤å¨´ä½ºâ–¼_ç€¹å±¾æš£ç’‡å­˜æ§‘.md",
          "snippet": "Lite æ•°æ®åº“ï¼ˆpicksã€model_scoresã€execution_logï¼‰ - `bridge/outbox/orders.csv`ï¼šMorning Job ç”Ÿæˆçš„è®¢å•æ–‡ä»¶ï¼ˆPTrade ç«¯è¯»å–ï¼‰ - `bridge/outbox/orders_pr"
        },
        {
          "regex": "orders\\.csv",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\ptrade\\PTrade_Dumb_Executor.py",
          "snippet": "\"\"\"PTrade Dumb Executor (Receiver)  Design goals: - æåº¦æ„šè ¢ï¼šåªè¯» orders.csv é€è¡Œä¸‹å•ï¼Œä¸åšè®¡ç®— - é˜²é‡å¤ï¼šè¯»å rename ä¸º orders_processed_{date}_{run_id"
        },
        {
          "regex": "atomic_write",
          "file": "C:\\Users\\Administrator\\Desktop\\Quant_System\\scripts\\version_audit.py",
          "snippet": ", r\"generate_orders\", r\"è®¢å•åè®®\"]),                 (\"åŸå­å†™\", [r\"atomic_write\", r\"os\\.replace\", r\"tempfile\", r\"write.*tmp.*replace\"]),   "
        }
      ],
      "negative_evidence": []
    }
  },
  "scanned_files": 93,
  "ignored_dirs": [
    ".git",
    ".idea",
    ".pytest_cache",
    ".venv",
    ".vscode",
    "__pycache__",
    "build",
    "data",
    "dataset",
    "datasets",
    "dist",
    "env",
    "log",
    "logs",
    "node_modules",
    "out",
    "reports",
    "venv"
  ]
}